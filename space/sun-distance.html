<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªç©ºèµ›è·‘ - è°èƒ½æœ€å¿«åˆ°è¾¾å¤ªé˜³ï¼Ÿ</title>
    <link rel="preconnect" href="https://fonts.loli.net">
    <link href="https://fonts.loli.net/css2?family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 50%, #0a0a2a 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .star { position: absolute; border-radius: 50%; background: #fff; animation: twinkle 3s infinite alternate; }
        @keyframes twinkle { 0% { opacity: 0.3; } 100% { opacity: 1; } }

        .container {
            position: relative; z-index: 1;
            max-width: 820px; margin: 0 auto;
            padding: 20px 16px 60px;
        }

        /* ============ Header ============ */
        .header { text-align: center; margin-bottom: 20px; position: relative; }
        .back-btn {
            position: absolute; left: 0; top: 4px;
            color: rgba(255,255,255,0.5); text-decoration: none; font-size: 0.9rem;
            transition: color 0.2s;
        }
        .back-btn:hover { color: #fff; }
        .header h1 {
            font-size: 1.8rem; font-weight: 900;
            background: linear-gradient(135deg, #ff9800, #ffd54f);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }
        .subtitle { color: rgba(255,255,255,0.5); font-size: 0.95rem; margin-top: 4px; }

        /* ============ 3D Scene ============ */
        .scene-wrap {
            position: relative; width: 100%; height: 240px;
            border-radius: 14px; overflow: hidden; margin: 20px 0;
            background: radial-gradient(ellipse at 70% 50%, rgba(40,25,10,0.4) 0%, transparent 60%),
                        linear-gradient(135deg, #05051a 0%, #0a0a2a 100%);
            border: 1px solid rgba(255,255,255,0.06);
        }
        #scene3d { width: 100%; height: 100%; cursor: grab; }
        #scene3d:active { cursor: grabbing; }
        #scene3d canvas { display: block; width: 100%; height: 100%; }
        .scene-hint {
            position: absolute; bottom: 8px; right: 12px;
            font-size: 0.65rem; color: rgba(255,255,255,0.25);
            pointer-events: none; transition: opacity 0.5s;
        }
        .scene-hint.hidden { opacity: 0; }

        /* ============ Intro ============ */
        .intro {
            text-align: center; font-size: 0.9rem; color: rgba(255,255,255,0.6);
            margin-bottom: 20px; line-height: 1.7;
        }

        /* ============ Tracks ============ */
        .tracks { display: flex; flex-direction: column; gap: 6px; margin-bottom: 20px; }
        .track {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px; padding: 10px 14px;
            cursor: pointer; transition: all 0.3s ease;
        }
        .track:hover { background: rgba(255,255,255,0.07); border-color: rgba(255,255,255,0.15); }
        .track.arrived { border-color: #ffd54f; box-shadow: 0 0 12px rgba(255,213,77,0.2); }

        .track-main { display: flex; align-items: center; gap: 10px; }
        .track-info { display: flex; align-items: center; gap: 8px; min-width: 110px; flex-shrink: 0; }
        .track-icon { font-size: 1.4rem; width: 28px; text-align: center; }
        .track-name { font-weight: 700; font-size: 0.9rem; white-space: nowrap; }
        .track-speed { font-size: 0.7rem; color: rgba(255,255,255,0.35); }

        .track-bar-wrap {
            flex: 1; height: 22px; min-width: 80px;
            background: rgba(255,255,255,0.06); border-radius: 11px;
            position: relative; overflow: hidden;
        }
        .track-bar-fill {
            height: 100%; width: 0%; border-radius: 11px;
            position: relative; min-width: 0;
        }
        .track-bar-fill.animate { transition: width 0.15s linear; }

        .track-status { min-width: 90px; text-align: right; font-size: 0.82rem; color: rgba(255,255,255,0.6); flex-shrink: 0; }
        .track-status.done { color: #ffd54f; font-weight: 700; }

        /* ============ Arrival Banner ============ */
        .arrival-banner {
            max-height: 0; overflow: hidden; opacity: 0;
            transition: max-height 0.4s ease, opacity 0.4s ease, margin 0.3s ease;
            font-size: 0.85rem; color: #ffd54f; padding-left: 46px;
        }
        .arrival-banner.show { max-height: 40px; opacity: 1; margin-top: 6px; }

        /* ============ Journey Card ============ */
        .journey-card {
            max-height: 0; overflow: hidden;
            transition: max-height 0.5s ease, margin 0.3s ease;
        }
        .journey-card.expanded { max-height: 500px; margin-top: 10px; }

        .journey-inner {
            background: rgba(255,255,255,0.05); border-radius: 10px; padding: 14px 16px;
        }
        .journey-title { font-size: 0.95rem; font-weight: 700; margin-bottom: 12px; }

        .milestone {
            display: flex; gap: 10px; padding: 7px 0 7px 14px;
            border-left: 2px solid var(--tc); margin-left: 5px; position: relative;
        }
        .milestone::before {
            content: ''; position: absolute; left: -6px; top: 11px;
            width: 10px; height: 10px; border-radius: 50%; background: var(--tc);
        }
        .milestone:last-of-type { border-left-color: transparent; }
        .milestone-time { font-weight: 700; min-width: 85px; font-size: 0.85rem; flex-shrink: 0; }
        .milestone-body { flex: 1; }
        .milestone-label { font-size: 0.85rem; color: rgba(255,255,255,0.8); }
        .milestone-fun { font-size: 0.78rem; color: rgba(255,255,255,0.4); margin-top: 2px; }

        .journey-fact {
            margin-top: 10px; padding: 8px 12px;
            background: rgba(255,215,77,0.08); border-radius: 8px;
            font-size: 0.85rem; color: #ffd54f;
        }

        /* ============ Controls ============ */
        .controls {
            background: rgba(255,255,255,0.04); border-radius: 12px;
            padding: 14px 16px; margin-bottom: 18px;
        }
        .timer-row { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 10px; }
        .timer-label { color: rgba(255,255,255,0.5); font-size: 0.9rem; }
        .timer-value { font-size: 1.15rem; font-weight: 700; color: #ffd54f; min-width: 100px; }

        .speed-row { display: flex; align-items: center; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .speed-label { font-size: 0.8rem; color: rgba(255,255,255,0.4); }
        .speed-btn {
            padding: 5px 12px; border-radius: 18px;
            border: 1px solid rgba(255,255,255,0.15); background: rgba(255,255,255,0.05);
            color: rgba(255,255,255,0.7); font-size: 0.82rem; cursor: pointer; transition: all 0.2s;
            font-family: inherit;
        }
        .speed-btn:hover { background: rgba(255,255,255,0.1); }
        .speed-btn.active { background: rgba(255,152,0,0.2); border-color: #ff9800; color: #ff9800; }
        .speed-hint { width: 100%; text-align: center; font-size: 0.75rem; color: rgba(255,255,255,0.3); margin-top: 6px; }

        /* ============ Action Buttons ============ */
        .action-area { display: flex; justify-content: center; gap: 12px; margin-bottom: 20px; }
        .btn-primary {
            padding: 12px 36px; font-size: 1.2rem; font-weight: 700;
            border: none; border-radius: 28px;
            background: linear-gradient(135deg, #ff9800, #ff5722);
            color: #fff; cursor: pointer; transition: all 0.3s; font-family: inherit;
        }
        .btn-primary:hover { transform: scale(1.05); box-shadow: 0 8px 25px rgba(255,152,0,0.3); }
        .btn-secondary {
            padding: 10px 22px; font-size: 0.95rem; font-weight: 700;
            border: 1px solid rgba(255,255,255,0.2); border-radius: 22px;
            background: rgba(255,255,255,0.06); color: #fff;
            cursor: pointer; transition: all 0.2s; font-family: inherit;
        }
        .btn-secondary:hover { background: rgba(255,255,255,0.12); }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,152,0,0.4); }
            70% { box-shadow: 0 0 0 14px rgba(255,152,0,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,152,0,0); }
        }
        .pulse { animation: pulse 2s infinite; }

        /* ============ Finish ============ */
        .finish { display: none; text-align: center; padding: 20px; background: rgba(255,215,77,0.08); border: 1px solid rgba(255,215,77,0.2); border-radius: 14px; margin-top: 10px; }
        .finish.show { display: block; }
        .finish-title { font-size: 1.3rem; font-weight: 900; margin-bottom: 8px; }
        .finish-ranks { text-align: left; display: inline-block; font-size: 0.9rem; line-height: 1.8; }
        .finish-footer { margin-top: 12px; font-size: 0.85rem; color: rgba(255,255,255,0.6); }

        /* ============ Responsive ============ */
        @media (max-width: 600px) {
            .header h1 { font-size: 1.4rem; }
            .scene-wrap { height: 180px; }
            .track-info { min-width: 90px; }
            .track-bar-wrap { height: 18px; }
            .track-status { min-width: 70px; font-size: 0.78rem; }
            .speed-btn { padding: 4px 10px; font-size: 0.78rem; }
            .btn-primary { padding: 10px 28px; font-size: 1.1rem; }
            .milestone-time { min-width: 70px; font-size: 0.8rem; }
            .arrival-banner { padding-left: 38px; font-size: 0.8rem; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <header class="header">
            <a href="../index.html" class="back-btn">â† è¿”å›ä¹å›­</a>
            <h1>â˜€ï¸ å¤ªç©ºèµ›è·‘</h1>
            <p class="subtitle">è°èƒ½æœ€å¿«åˆ°è¾¾å¤ªé˜³ï¼Ÿ</p>
        </header>

        <div class="scene-wrap">
            <div id="scene3d"></div>
            <div class="scene-hint" id="sceneHint">ğŸ–±ï¸ æ‹–åŠ¨æ—‹è½¬</div>
        </div>

        <p class="intro">åœ°çƒåˆ°å¤ªé˜³æœ‰ 1 äº¿ 5 åƒä¸‡å…¬é‡Œè¿œï¼<br>åä¸åŒçš„äº¤é€šå·¥å…·å‡ºå‘ï¼Œè¦å¤šä¹…æ‰èƒ½åˆ°å‘¢ï¼Ÿç‚¹å‡»èµ›é“æŸ¥çœ‹æ—…ç¨‹æ•…äº‹ï¼</p>

        <div id="tracks" class="tracks"></div>

        <div class="controls" id="controls">
            <div class="timer-row">
                <span class="timer-label">â±ï¸ å·²è¿‡å»</span>
                <span class="timer-value" id="timer">0 ç§’</span>
            </div>
            <div class="speed-row">
                <span class="speed-label">å€ç‡</span>
                <button class="speed-btn" data-speed="10000">1ä¸‡x</button>
                <button class="speed-btn" data-speed="1000000">100ä¸‡x</button>
                <button class="speed-btn active" data-speed="100000000">1äº¿x</button>
                <button class="speed-btn" data-speed="1000000000">10äº¿x</button>
                <div class="speed-hint" id="speedHint">1ç§’ â‰ˆ 3.2å¹´ï¼Œé€‚åˆè§‚çœ‹é£æœºã€é«˜é“ã€æ±½è½¦</div>
            </div>
        </div>

        <div class="action-area" id="actionArea">
            <button class="btn-primary pulse" id="startBtn">ğŸ å‡ºå‘ï¼</button>
        </div>

        <div class="finish" id="finish">
            <div class="finish-title">ğŸ‰ æ¯”èµ›ç»“æŸï¼</div>
            <div class="finish-ranks" id="finishRanks"></div>
            <div class="finish-footer" id="finishFooter"></div>
        </div>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
<script>
// ============ 3D å¤ªé˜³+åœ°çƒåœºæ™¯ ============
(function() {
    const container = document.getElementById('scene3d');
    if (!container) return;

    // ---- å¸ƒå±€å¸¸é‡ ----
    const EARTH_POS = -28;
    const SUN_POS = 28;
    const MID = (EARTH_POS + SUN_POS) / 2;
    const EARTH_R = 2;
    const SUN_R = 8;

    // ---- Renderer ----
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    container.appendChild(renderer.domElement);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
    camera.position.set(MID, 8, 55);
    camera.lookAt(MID, 0, 0);

    // ---- OrbitControls ----
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.target.set(MID, 0, 0);
    controls.enablePan = false;
    controls.enableZoom = true;
    controls.minDistance = 25;
    controls.maxDistance = 120;
    controls.maxPolarAngle = Math.PI * 0.85;
    controls.minPolarAngle = Math.PI * 0.15;
    controls.enableDamping = true;
    controls.dampingFactor = 0.08;
    controls.rotateSpeed = 0.5;

    // ç”¨æˆ·äº¤äº’åéšè—æç¤º
    let hintHidden = false;
    controls.addEventListener('start', () => {
        if (!hintHidden) {
            const hint = document.getElementById('sceneHint');
            if (hint) hint.classList.add('hidden');
            hintHidden = true;
        }
    });

    // ç¯å¢ƒå…‰
    scene.add(new THREE.AmbientLight(0x334466, 0.4));

    // ============ å¤ªé˜³ ============
    const sunGeo = new THREE.SphereGeometry(SUN_R, 64, 64);
    const sunMat = new THREE.ShaderMaterial({
        uniforms: { time: { value: 0 } },
        vertexShader: `
            varying vec3 vNormal; varying vec2 vUv;
            void main() {
                vNormal = normalize(normalMatrix * normal); vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        `,
        fragmentShader: `
            uniform float time; varying vec3 vNormal; varying vec2 vUv;
            float noise(vec2 p) { return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453); }
            float fbm(vec2 p) {
                float v = 0.0, a = 0.5;
                for (int i = 0; i < 5; i++) { v += a * noise(p); p *= 2.0; a *= 0.5; }
                return v;
            }
            void main() {
                float n = fbm(vUv * 10.0 + time * 0.1);
                float n2 = fbm(vUv * 20.0 - time * 0.15);
                vec3 c1 = vec3(1.0, 0.95, 0.5), c2 = vec3(1.0, 0.7, 0.2), c3 = vec3(1.0, 0.5, 0.1);
                vec3 color = mix(mix(c1, c2, n), c3, n2 * 0.3);
                color += vec3(1.0, 0.6, 0.2) * pow(1.0 - dot(vNormal, vec3(0,0,1)), 2.0) * 0.5;
                gl_FragColor = vec4(color, 1.0);
            }
        `
    });
    const sunMesh = new THREE.Mesh(sunGeo, sunMat);
    sunMesh.position.set(SUN_POS, 0, 0);
    scene.add(sunMesh);

    // å¤ªé˜³å…‰æ™• - å†…å±‚
    const coronaMat = new THREE.ShaderMaterial({
        uniforms: { time: { value: 0 } },
        vertexShader: `varying vec3 vN; void main(){ vN=normalize(normalMatrix*normal); gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0); }`,
        fragmentShader: `uniform float time; varying vec3 vN; void main(){ float i=pow(0.6-dot(vN,vec3(0,0,1)),2.0); gl_FragColor=vec4(vec3(1,.7,.2)*i*(sin(time*2.)*.1+.9), i*.6); }`,
        transparent: true, blending: THREE.AdditiveBlending, side: THREE.BackSide
    });
    sunMesh.add(new THREE.Mesh(new THREE.SphereGeometry(SUN_R * 1.25, 32, 32), coronaMat));

    // å¤ªé˜³å…‰æ™• - å¤–å±‚
    const outerGlowMat = new THREE.ShaderMaterial({
        vertexShader: `varying vec3 vN; void main(){ vN=normalize(normalMatrix*normal); gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0); }`,
        fragmentShader: `varying vec3 vN; void main(){ float i=pow(0.4-dot(vN,vec3(0,0,1)),3.0); gl_FragColor=vec4(vec3(1,.5,.1)*i, i*.3); }`,
        transparent: true, blending: THREE.AdditiveBlending, side: THREE.BackSide
    });
    sunMesh.add(new THREE.Mesh(new THREE.SphereGeometry(SUN_R * 1.75, 32, 32), outerGlowMat));

    // å¤ªé˜³ç‚¹å…‰æº
    sunMesh.add(new THREE.PointLight(0xffdd88, 2, 200));

    // ============ åœ°çƒ ============
    const earthGeo = new THREE.SphereGeometry(EARTH_R, 64, 64);
    const textureLoader = new THREE.TextureLoader();
    const earthDayMap = textureLoader.load('textures/earth_daymap.jpg');
    const earthMat = new THREE.ShaderMaterial({
        uniforms: {
            time: { value: 0 },
            dayTexture: { value: earthDayMap },
            sunDirection: { value: new THREE.Vector3(1, 0, 0) }
        },
        vertexShader: `
            uniform vec3 sunDirection;
            varying vec3 vNormal, vViewDir, vSunDir; varying vec2 vUv;
            void main() {
                vNormal = normalize(normalMatrix * normal); vUv = uv;
                vec4 mvPos = modelViewMatrix * vec4(position, 1.0);
                vViewDir = normalize(-mvPos.xyz);
                vSunDir = normalize(mat3(viewMatrix) * sunDirection);
                gl_Position = projectionMatrix * mvPos;
            }
        `,
        fragmentShader: `
            uniform sampler2D dayTexture;
            varying vec3 vNormal, vViewDir, vSunDir; varying vec2 vUv;
            void main() {
                vec3 sc = texture2D(dayTexture, vUv).rgb * 1.15;
                sc *= max(dot(vNormal, vSunDir), 0.0) * 0.55 + 0.45;
                float f = pow(1.0 - max(dot(vNormal, vViewDir), 0.0), 4.0);
                gl_FragColor = vec4(mix(sc, vec3(0.3, 0.6, 1.0), f * 0.15), 1.0);
            }
        `
    });
    const earthMesh = new THREE.Mesh(earthGeo, earthMat);
    earthMesh.position.set(EARTH_POS, 0, 0);
    scene.add(earthMesh);

    // åœ°çƒäº‘å±‚
    const cloudMat = new THREE.MeshPhongMaterial({
        map: textureLoader.load('textures/earth_clouds.jpg'),
        transparent: true, opacity: 0.2, depthWrite: false, side: THREE.DoubleSide
    });
    const cloudMesh = new THREE.Mesh(new THREE.SphereGeometry(EARTH_R * 1.015, 32, 32), cloudMat);
    earthMesh.add(cloudMesh);

    // åœ°çƒå¤§æ°”å±‚å…‰æ™•
    const atmoMat = new THREE.ShaderMaterial({
        vertexShader: `varying vec3 vN; void main(){ vN=normalize(normalMatrix*normal); gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0); }`,
        fragmentShader: `varying vec3 vN; void main(){ float i=pow(0.55-dot(vN,vec3(0,0,1)),3.0); gl_FragColor=vec4(vec3(.3,.6,1.), i*.4); }`,
        transparent: true, blending: THREE.AdditiveBlending, side: THREE.BackSide, depthWrite: false
    });
    earthMesh.add(new THREE.Mesh(new THREE.SphereGeometry(EARTH_R * 1.1, 32, 32), atmoMat));

    // ============ è¿çº¿ + è·ç¦»æ ‡æ³¨ ============
    // è™šçº¿ï¼šä»åœ°çƒè¡¨é¢åˆ°å¤ªé˜³è¡¨é¢
    const lineStart = EARTH_POS + EARTH_R + 0.5;
    const lineEnd = SUN_POS - SUN_R - 0.5;
    const lineGeo = new THREE.BufferGeometry().setFromPoints([
        new THREE.Vector3(lineStart, 0, 0),
        new THREE.Vector3(lineEnd, 0, 0)
    ]);
    const lineMat = new THREE.LineDashedMaterial({
        color: 0xffffff, opacity: 0.25, transparent: true,
        dashSize: 1.2, gapSize: 0.8
    });
    const distLine = new THREE.Line(lineGeo, lineMat);
    distLine.computeLineDistances();
    scene.add(distLine);

    // çº¿ä¸¤ç«¯çš„å°å…‰ç‚¹
    [lineStart, lineEnd].forEach(x => {
        const dotGeo = new THREE.SphereGeometry(0.2, 8, 8);
        const dotMat = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.5 });
        const dot = new THREE.Mesh(dotGeo, dotMat);
        dot.position.set(x, 0, 0);
        scene.add(dot);
    });

    // è·ç¦»æ–‡å­— Sprite
    function makeTextSprite(text, fontSize, color) {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 512; canvas.height = 128;
        ctx.font = `bold ${fontSize}px "Noto Sans SC", sans-serif`;
        ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
        ctx.fillStyle = color;
        ctx.fillText(text, 256, 64);
        const tex = new THREE.CanvasTexture(canvas);
        tex.minFilter = THREE.LinearFilter;
        const mat = new THREE.SpriteMaterial({ map: tex, transparent: true, depthWrite: false });
        const sprite = new THREE.Sprite(mat);
        sprite.scale.set(20, 5, 1);
        return sprite;
    }

    // "1.5 äº¿å…¬é‡Œ" ä¸»æ ‡æ³¨
    const distLabel = makeTextSprite('1.5 äº¿å…¬é‡Œ', 48, 'rgba(255,213,77,0.85)');
    distLabel.position.set(MID, 3.5, 0);
    scene.add(distLabel);

    // "åœ°çƒ" æ ‡æ³¨ â€” å¤§å­—é†’ç›®
    const earthLabel = makeTextSprite('åœ°çƒ', 80, 'rgba(100,180,255,1)');
    earthLabel.position.set(EARTH_POS, -EARTH_R - 4.5, 0);
    earthLabel.scale.set(18, 4.5, 1);
    scene.add(earthLabel);

    // "å¤ªé˜³" æ ‡æ³¨ â€” å¤§å­—é†’ç›®
    const sunLabel = makeTextSprite('å¤ªé˜³', 80, 'rgba(255,210,80,1)');
    sunLabel.position.set(SUN_POS, -SUN_R - 5, 0);
    sunLabel.scale.set(18, 4.5, 1);
    scene.add(sunLabel);

    // ============ æ˜Ÿç©ºç²’å­ ============
    const starCount = 2000;
    const sPos = new Float32Array(starCount * 3);
    const sCol = new Float32Array(starCount * 3);
    const sSiz = new Float32Array(starCount);
    for (let i = 0; i < starCount; i++) {
        const i3 = i * 3;
        const r = 200 + Math.random() * 200;
        const theta = Math.random() * Math.PI * 2;
        const phi = Math.acos(2 * Math.random() - 1);
        sPos[i3] = r * Math.sin(phi) * Math.cos(theta);
        sPos[i3+1] = r * Math.sin(phi) * Math.sin(theta);
        sPos[i3+2] = r * Math.cos(phi);
        const c = Math.random();
        if (c < 0.6) { sCol[i3]=1; sCol[i3+1]=1; sCol[i3+2]=1; }
        else if (c < 0.8) { sCol[i3]=0.7; sCol[i3+1]=0.8; sCol[i3+2]=1; }
        else { sCol[i3]=1; sCol[i3+1]=0.95; sCol[i3+2]=0.8; }
        sSiz[i] = Math.random() * 2 + 0.5;
    }
    const starGeo = new THREE.BufferGeometry();
    starGeo.setAttribute('position', new THREE.BufferAttribute(sPos, 3));
    starGeo.setAttribute('color', new THREE.BufferAttribute(sCol, 3));
    starGeo.setAttribute('size', new THREE.BufferAttribute(sSiz, 1));
    const starMat = new THREE.ShaderMaterial({
        uniforms: { time: { value: 0 } },
        vertexShader: `
            attribute float size; attribute vec3 color;
            varying vec3 vColor; uniform float time;
            void main() {
                vColor = color;
                vec4 mv = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = size * (300.0 / -mv.z) * (sin(time*2.0+position.x*.01)*.3+.7);
                gl_Position = projectionMatrix * mv;
            }
        `,
        fragmentShader: `
            varying vec3 vColor;
            void main() {
                float d = length(gl_PointCoord - .5);
                float a = 1.0 - smoothstep(0.0, 0.5, d);
                gl_FragColor = vec4(vColor, (a + exp(-d*3.)*.5) * .9);
            }
        `,
        transparent: true, blending: THREE.AdditiveBlending, depthWrite: false
    });
    scene.add(new THREE.Points(starGeo, starMat));

    // ============ å°ºå¯¸è‡ªé€‚åº” ============
    function resize() {
        const w = container.clientWidth, h = container.clientHeight;
        renderer.setSize(w, h);
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
    }
    resize();
    window.addEventListener('resize', resize);

    // ============ åŠ¨ç”»å¾ªç¯ ============
    function animate3D(ts) {
        requestAnimationFrame(animate3D);
        const t = ts * 0.001;
        sunMat.uniforms.time.value = t;
        coronaMat.uniforms.time.value = t;
        starMat.uniforms.time.value = t;
        earthMesh.rotation.y += 0.002;
        cloudMesh.rotation.y -= 0.001;
        // è™šçº¿è„‰å†²å‘¼å¸
        lineMat.opacity = 0.2 + Math.sin(t * 1.5) * 0.08;
        controls.update();
        renderer.render(scene, camera);
    }
    requestAnimationFrame(animate3D);
})();
</script>
<script>
// ============ æ•°æ® ============
const SUN_DISTANCE = 150_000_000;

const VEHICLES = [
    {
        id: 'walk', icon: 'ğŸš¶', name: 'æ­¥è¡Œ',
        speedKmH: 5, speedDisplay: '5 km/h', color: '#9e9e9e',
        arrivalMsg: '3,424å¹´ â€” ä»å¤§ç¦¹æ²»æ°´èµ°åˆ°ä»Šå¤©ï¼',
        funFact: 'äººç±»æ–‡æ˜çš„å†å²éƒ½ä¸å¤Ÿèµ°å®Œè¿™æ®µè·¯ï¼',
        milestones: [
            { label: 'åŒ—äº¬â†’ä¸Šæµ·', dist: '1,200å…¬é‡Œ', time: '10å¤©', fun: 'æ¯å¤©èµ°8å°æ—¶ï¼Œè¦èµ°10å¤©' },
            { label: 'ç»•åœ°çƒä¸€åœˆ', dist: '4ä¸‡å…¬é‡Œ', time: '11ä¸ªæœˆ', fun: 'èµ°äº†å°†è¿‘ä¸€æ•´å¹´' },
            { label: 'åˆ°è¾¾æœˆçƒ ğŸŒ™', dist: '38ä¸‡å…¬é‡Œ', time: 'è¿‘9å¹´', fun: 'æ™ºå¤©ä»å‡ºç”Ÿèµ°åˆ°ä¸Šå°å­¦' },
            { label: 'åˆ°è¾¾ç«æ˜Ÿ ğŸ”´', dist: '5,500ä¸‡å…¬é‡Œ', time: '1,256å¹´', fun: 'ä»å”æœèµ°åˆ°ç°åœ¨' },
            { label: 'åˆ°è¾¾å¤ªé˜³ â˜€ï¸', dist: '1.5äº¿å…¬é‡Œ', time: '3,424å¹´', fun: 'ä»å¤§ç¦¹æ²»æ°´èµ°åˆ°ä»Šå¤©' },
        ]
    },
    {
        id: 'ebike', icon: 'ğŸ›µ', name: 'ç”µåŠ¨è½¦',
        speedKmH: 25, speedDisplay: '25 km/h', color: '#66bb6a',
        arrivalMsg: '685å¹´ â€” ä»å…ƒæœéª‘åˆ°ç°åœ¨ï¼',
        funFact: '685å¹´å‰æ˜¯å…ƒæœï¼Œé‚£æ—¶å€™è¿˜æ²¡æœ‰ç”µåŠ¨è½¦å‘¢ï¼',
        milestones: [
            { label: 'åŒ—äº¬â†’ä¸Šæµ·', dist: '1,200å…¬é‡Œ', time: '2å¤©', fun: 'éª‘ä¸¤å¤©ä¸¤å¤œ' },
            { label: 'ç»•åœ°çƒä¸€åœˆ', dist: '4ä¸‡å…¬é‡Œ', time: '67å¤©', fun: 'ä¸¤ä¸ªå¤šæœˆ' },
            { label: 'åˆ°è¾¾æœˆçƒ ğŸŒ™', dist: '38ä¸‡å…¬é‡Œ', time: '1å¹´9ä¸ªæœˆ', fun: 'å·®ä¸å¤šä¸¤å¹´' },
            { label: 'åˆ°è¾¾ç«æ˜Ÿ ğŸ”´', dist: '5,500ä¸‡å…¬é‡Œ', time: '251å¹´', fun: 'ä»æ¸…æœéª‘åˆ°ç°åœ¨' },
            { label: 'åˆ°è¾¾å¤ªé˜³ â˜€ï¸', dist: '1.5äº¿å…¬é‡Œ', time: '685å¹´', fun: 'ä»å…ƒæœéª‘åˆ°ç°åœ¨' },
        ]
    },
    {
        id: 'car', icon: 'ğŸš—', name: 'å°æ±½è½¦',
        speedKmH: 120, speedDisplay: '120 km/h', color: '#42a5f5',
        arrivalMsg: '143å¹´ â€” çˆ·çˆ·å¼€åˆ°å­™å­æ¥ç€å¼€ï¼',
        funFact: 'ä¸€å®¶ä¸‰ä»£äººæ¥åŠ›å¼€è½¦éƒ½åˆ°ä¸äº†å¤ªé˜³ï¼',
        milestones: [
            { label: 'åŒ—äº¬â†’ä¸Šæµ·', dist: '1,200å…¬é‡Œ', time: '10å°æ—¶', fun: 'æ—©ä¸Šå‡ºå‘ï¼Œæ™šä¸Šåˆ°' },
            { label: 'ç»•åœ°çƒä¸€åœˆ', dist: '4ä¸‡å…¬é‡Œ', time: '14å¤©', fun: 'ä¸¤ä¸ªæ˜ŸæœŸä¸åœè½¦' },
            { label: 'åˆ°è¾¾æœˆçƒ ğŸŒ™', dist: '38ä¸‡å…¬é‡Œ', time: '4ä¸ªåŠæœˆ', fun: 'å¿«ä¸€ä¸ªå­¦æœŸäº†' },
            { label: 'åˆ°è¾¾ç«æ˜Ÿ ğŸ”´', dist: '5,500ä¸‡å…¬é‡Œ', time: '52å¹´', fun: 'æ™ºå¤©å¼€åˆ°å˜è€çˆ·çˆ·' },
            { label: 'åˆ°è¾¾å¤ªé˜³ â˜€ï¸', dist: '1.5äº¿å…¬é‡Œ', time: '143å¹´', fun: 'çˆ·çˆ·ä¼ çˆ¸çˆ¸ï¼Œçˆ¸çˆ¸ä¼ å„¿å­' },
        ]
    },
    {
        id: 'train', icon: 'ğŸš„', name: 'é«˜é“',
        speedKmH: 350, speedDisplay: '350 km/h', color: '#ab47bc',
        arrivalMsg: '49å¹´ â€” æ™ºå¤©ååˆ°å¤´å‘ç™½äº†ï¼',
        funFact: 'ä»å°å®å®ååˆ°è€çˆ·çˆ·ï¼',
        milestones: [
            { label: 'åŒ—äº¬â†’ä¸Šæµ·', dist: '1,200å…¬é‡Œ', time: '3.5å°æ—¶', fun: 'çœ‹ä¸€éƒ¨åŠ¨ç”»ç‰‡ç”µå½±' },
            { label: 'ç»•åœ°çƒä¸€åœˆ', dist: '4ä¸‡å…¬é‡Œ', time: '5å¤©', fun: 'ä¸åˆ°ä¸€ä¸ªæ˜ŸæœŸ' },
            { label: 'åˆ°è¾¾æœˆçƒ ğŸŒ™', dist: '38ä¸‡å…¬é‡Œ', time: '46å¤©', fun: 'ä¸€ä¸ªåŠæœˆ' },
            { label: 'åˆ°è¾¾ç«æ˜Ÿ ğŸ”´', dist: '5,500ä¸‡å…¬é‡Œ', time: '18å¹´', fun: 'æ™ºå¤©ååˆ°ä¸Šå¤§å­¦' },
            { label: 'åˆ°è¾¾å¤ªé˜³ â˜€ï¸', dist: '1.5äº¿å…¬é‡Œ', time: '49å¹´', fun: 'æ™ºå¤©ååˆ°å¤´å‘å˜ç™½' },
        ]
    },
    {
        id: 'plane', icon: 'âœˆï¸', name: 'é£æœº',
        speedKmH: 900, speedDisplay: '900 km/h', color: '#26c6da',
        arrivalMsg: '19å¹´ â€” ä»å°å®å®é£åˆ°å¤§å­¦æ¯•ä¸šè¿˜æ²¡åˆ°ï¼',
        funFact: 'åé£æœºå»å¤ªé˜³ï¼Ÿä»å‡ºç”Ÿåˆ°å¤§å­¦æ¯•ä¸šéƒ½ä¸å¤Ÿï¼',
        milestones: [
            { label: 'åŒ—äº¬â†’ä¸Šæµ·', dist: '1,200å…¬é‡Œ', time: '1å°æ—¶20åˆ†', fun: 'çœ‹ä¸¤é›†åŠ¨ç”»ç‰‡' },
            { label: 'ç»•åœ°çƒä¸€åœˆ', dist: '4ä¸‡å…¬é‡Œ', time: '44å°æ—¶', fun: 'å·®ä¸å¤šä¸¤å¤©' },
            { label: 'åˆ°è¾¾æœˆçƒ ğŸŒ™', dist: '38ä¸‡å…¬é‡Œ', time: '18å¤©', fun: 'ä¸åˆ°ä¸‰ä¸ªæ˜ŸæœŸ' },
            { label: 'åˆ°è¾¾ç«æ˜Ÿ ğŸ”´', dist: '5,500ä¸‡å…¬é‡Œ', time: '7å¹´', fun: 'æ™ºå¤©é£åˆ°ä¸Šå°å­¦' },
            { label: 'åˆ°è¾¾å¤ªé˜³ â˜€ï¸', dist: '1.5äº¿å…¬é‡Œ', time: '19å¹´', fun: 'æ™ºå¤©é£åˆ°å¤§å­¦æ¯•ä¸šè¿˜æ²¡åˆ°' },
        ]
    },
    {
        id: 'rocket', icon: 'ğŸš€', name: 'ç«ç®­',
        speedKmH: 40000, speedDisplay: '4ä¸‡ km/h', color: '#ff7043',
        arrivalMsg: '5ä¸ªæœˆ â€” å·®ä¸å¤šä¸€ä¸ªå­¦æœŸï¼',
        funFact: 'ç«ç®­å·²ç»å¾ˆå¿«äº†ï¼Œä½†åˆ°å¤ªé˜³è¿˜è¦åŠå¹´ï¼',
        milestones: [
            { label: 'åŒ—äº¬â†’ä¸Šæµ·', dist: '1,200å…¬é‡Œ', time: 'ä¸åˆ°2åˆ†é’Ÿ', fun: 'çœ¨å‡ ä¸‹çœ¼' },
            { label: 'ç»•åœ°çƒä¸€åœˆ', dist: '4ä¸‡å…¬é‡Œ', time: '1å°æ—¶', fun: 'ä¸€èŠ‚è¯¾çš„æ—¶é—´' },
            { label: 'åˆ°è¾¾æœˆçƒ ğŸŒ™', dist: '38ä¸‡å…¬é‡Œ', time: 'ä¸åˆ°10å°æ—¶', fun: 'ç¡ä¸€è§‰å°±åˆ°äº†' },
            { label: 'åˆ°è¾¾ç«æ˜Ÿ ğŸ”´', dist: '5,500ä¸‡å…¬é‡Œ', time: '57å¤©', fun: 'å·®ä¸å¤šä¸¤ä¸ªæœˆ' },
            { label: 'åˆ°è¾¾å¤ªé˜³ â˜€ï¸', dist: '1.5äº¿å…¬é‡Œ', time: '5ä¸ªæœˆ', fun: 'å·®ä¸å¤šä¸€ä¸ªå­¦æœŸ' },
        ]
    },
    {
        id: 'light', icon: 'âš¡', name: 'å…‰',
        speedKmH: 1_080_000_000, speedDisplay: '30ä¸‡ km/s', color: '#ffd54f',
        arrivalMsg: '8åˆ†20ç§’ â€” åƒåŠä¸ªè‹¹æœçš„æ—¶é—´ï¼',
        funFact: 'å…‰æ˜¯å®‡å®™ä¸­æœ€å¿«çš„ï¼ä½†åˆ°å¤ªé˜³ä¹Ÿè¦8åˆ†å¤šé’Ÿå‘¢ï¼',
        milestones: [
            { label: 'åŒ—äº¬â†’ä¸Šæµ·', dist: '1,200å…¬é‡Œ', time: '0.004ç§’', fun: 'æ¯”çœ¨çœ¼å¿«ä¸€åƒå€' },
            { label: 'ç»•åœ°çƒä¸€åœˆ', dist: '4ä¸‡å…¬é‡Œ', time: '0.13ç§’', fun: 'ä¸€çœ¨çœ¼å°±ç»•äº†åœ°çƒ' },
            { label: 'åˆ°è¾¾æœˆçƒ ğŸŒ™', dist: '38ä¸‡å…¬é‡Œ', time: '1.3ç§’', fun: 'è¯´ä¸€ä¸ªå­—çš„æ—¶é—´' },
            { label: 'åˆ°è¾¾ç«æ˜Ÿ ğŸ”´', dist: '5,500ä¸‡å…¬é‡Œ', time: '3åˆ†é’Ÿ', fun: 'åˆ·ä¸€æ¬¡ç‰™çš„æ—¶é—´' },
            { label: 'åˆ°è¾¾å¤ªé˜³ â˜€ï¸', dist: '1.5äº¿å…¬é‡Œ', time: '8åˆ†20ç§’', fun: 'åƒåŠä¸ªè‹¹æœçš„æ—¶é—´' },
        ]
    },
];

const SPEED_HINTS = {
    10000: '1ç§’ â‰ˆ 2.8å°æ—¶ï¼Œé€‚åˆè§‚çœ‹ âš¡å…‰',
    1000000: '1ç§’ â‰ˆ 11.6å¤©ï¼Œé€‚åˆè§‚çœ‹ ğŸš€ç«ç®­',
    100000000: '1ç§’ â‰ˆ 3.2å¹´ï¼Œé€‚åˆè§‚çœ‹ âœˆï¸ğŸš„ğŸš—',
    1000000000: '1ç§’ â‰ˆ 31.7å¹´ï¼Œæ‰€æœ‰äº¤é€šå·¥å…·å¯è§',
};

// ============ çŠ¶æ€ ============
let raceState = 'idle'; // idle | running | paused | finished
let simSeconds = 0;
let speedMul = 100_000_000;
let lastTs = null;
let rankCounter = 0;
let expandedCard = null;
const vStates = {};

// ============ DOM å¼•ç”¨ ============
const tracksEl = document.getElementById('tracks');
const timerEl = document.getElementById('timer');
const actionArea = document.getElementById('actionArea');
const finishEl = document.getElementById('finish');
const speedHintEl = document.getElementById('speedHint');

// ============ åˆå§‹åŒ– ============
function init() {
    VEHICLES.forEach(v => {
        vStates[v.id] = { arrived: false, rank: 0 };
        buildTrack(v);
    });
    setupSpeedBtns();
    document.getElementById('startBtn').addEventListener('click', startRace);
    createStars();
}

function buildTrack(v) {
    const el = document.createElement('div');
    el.className = 'track';
    el.dataset.id = v.id;
    el.style.setProperty('--tc', v.color);

    const totalTime = formatTime(SUN_DISTANCE / v.speedKmH * 3600);

    el.innerHTML = `
        <div class="track-main">
            <div class="track-info">
                <span class="track-icon">${v.icon}</span>
                <div>
                    <div class="track-name">${v.name}</div>
                    <div class="track-speed">${v.speedDisplay}</div>
                </div>
            </div>
            <div class="track-bar-wrap">
                <div class="track-bar-fill" data-fill style="background:${v.color};width:0%"></div>
            </div>
            <div class="track-status" data-status>${totalTime}</div>
        </div>
        <div class="arrival-banner" data-banner>${v.arrivalMsg}</div>
        <div class="journey-card" data-card>
            <div class="journey-inner">
                <div class="journey-title">${v.icon} ${v.name}çš„å¤ªé˜³ä¹‹æ—…ï¼ˆ${v.speedDisplay}ï¼‰</div>
                ${v.milestones.map(m => `
                    <div class="milestone">
                        <div class="milestone-time">${m.time}</div>
                        <div class="milestone-body">
                            <div class="milestone-label">ğŸ“ ${m.label}ï¼ˆ${m.dist}ï¼‰</div>
                            <div class="milestone-fun">${m.fun}</div>
                        </div>
                    </div>
                `).join('')}
                <div class="journey-fact">ğŸ’¡ ${v.funFact}</div>
            </div>
        </div>
    `;

    el.addEventListener('click', (e) => {
        if (e.target.closest('.speed-btn') || e.target.closest('.btn-primary') || e.target.closest('.btn-secondary')) return;
        toggleCard(v.id, el);
    });

    tracksEl.appendChild(el);
    vStates[v.id].el = el;
}

function toggleCard(id, el) {
    const card = el.querySelector('[data-card]');
    if (expandedCard === id) {
        card.classList.remove('expanded');
        expandedCard = null;
    } else {
        if (expandedCard) {
            const prev = document.querySelector(`.track[data-id="${expandedCard}"] [data-card]`);
            if (prev) prev.classList.remove('expanded');
        }
        card.classList.add('expanded');
        expandedCard = id;
    }
}

// ============ é€Ÿåº¦æŒ‰é’® ============
function setupSpeedBtns() {
    document.querySelectorAll('.speed-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            document.querySelectorAll('.speed-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            speedMul = parseInt(btn.dataset.speed);
            speedHintEl.textContent = SPEED_HINTS[speedMul] || '';
        });
    });
}

// ============ æ¯”èµ›æ§åˆ¶ ============
function startRace() {
    raceState = 'running';
    lastTs = null;
    // å¯åŠ¨æ—¶ç»™è¿›åº¦æ¡åŠ è¿‡æ¸¡
    document.querySelectorAll('[data-fill]').forEach(f => f.classList.add('animate'));
    showRunningBtns();
    requestAnimationFrame(animate);
}

function pauseRace() {
    raceState = 'paused';
    showPausedBtns();
}

function resumeRace() {
    raceState = 'running';
    lastTs = null;
    showRunningBtns();
    requestAnimationFrame(animate);
}

function resetRace() {
    raceState = 'idle';
    simSeconds = 0;
    lastTs = null;
    rankCounter = 0;

    VEHICLES.forEach(v => {
        const s = vStates[v.id];
        s.arrived = false;
        s.rank = 0;
        const el = s.el;
        el.classList.remove('arrived');
        el.querySelector('[data-fill]').style.width = '0%';
        el.querySelector('[data-fill]').classList.remove('animate');
        el.querySelector('[data-status]').textContent = formatTime(SUN_DISTANCE / v.speedKmH * 3600);
        el.querySelector('[data-status]').classList.remove('done');
        el.querySelector('[data-banner]').classList.remove('show');
    });

    timerEl.textContent = '0 ç§’';
    finishEl.classList.remove('show');
    showIdleBtns();
}

// ============ æŒ‰é’®åˆ‡æ¢ ============
function showIdleBtns() {
    actionArea.innerHTML = '<button class="btn-primary pulse" onclick="startRace()">ğŸ å‡ºå‘ï¼</button>';
}
function showRunningBtns() {
    actionArea.innerHTML = `
        <button class="btn-secondary" onclick="pauseRace()">â¸ï¸ æš‚åœ</button>
        <button class="btn-secondary" onclick="resetRace()">ğŸ”„ é‡æ¥</button>
    `;
}
function showPausedBtns() {
    actionArea.innerHTML = `
        <button class="btn-secondary" onclick="resumeRace()">â–¶ï¸ ç»§ç»­</button>
        <button class="btn-secondary" onclick="resetRace()">ğŸ”„ é‡æ¥</button>
    `;
}
function showFinishedBtns() {
    actionArea.innerHTML = '<button class="btn-primary" onclick="resetRace()">ğŸ”„ å†æ¥ä¸€æ¬¡ï¼</button>';
}

// ============ åŠ¨ç”»å¼•æ“ ============
function animate(ts) {
    if (raceState !== 'running') return;
    if (lastTs === null) lastTs = ts;

    const dt = Math.min(ts - lastTs, 100); // cap at 100ms
    lastTs = ts;
    simSeconds += (dt / 1000) * speedMul;

    let allDone = true;

    VEHICLES.forEach(v => {
        const s = vStates[v.id];
        if (s.arrived) return;

        const dist = v.speedKmH * (simSeconds / 3600);
        const progress = Math.min(1, dist / SUN_DISTANCE);

        s.el.querySelector('[data-fill]').style.width = (progress * 100) + '%';

        if (progress >= 1) {
            s.arrived = true;
            rankCounter++;
            s.rank = rankCounter;
            onArrived(v, s);
        } else {
            allDone = false;
        }
    });

    // ç¡®è®¤æ˜¯å¦å…¨éƒ¨åˆ°è¾¾
    if (allDone) {
        VEHICLES.forEach(v => { if (!vStates[v.id].arrived) allDone = false; });
    }

    timerEl.textContent = formatTime(simSeconds);

    if (allDone) {
        raceState = 'finished';
        onAllDone();
    } else {
        requestAnimationFrame(animate);
    }
}

function onArrived(v, s) {
    s.el.classList.add('arrived');
    const statusEl = s.el.querySelector('[data-status]');
    const medals = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰','4ï¸âƒ£','5ï¸âƒ£','6ï¸âƒ£','7ï¸âƒ£'];
    statusEl.textContent = `${medals[s.rank-1]} ç¬¬${s.rank}å`;
    statusEl.classList.add('done');
    s.el.querySelector('[data-banner]').classList.add('show');
}

function onAllDone() {
    showFinishedBtns();
    // æ„å»ºæ’å
    const sorted = VEHICLES.slice().sort((a, b) => vStates[a.id].rank - vStates[b.id].rank);
    const medals = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
    let html = '';
    sorted.forEach((v, i) => {
        const medal = i < 3 ? medals[i] : `${i+1}.`;
        const totalTime = formatTime(SUN_DISTANCE / v.speedKmH * 3600);
        html += `<div>${medal} ${v.icon} ${v.name} â€” ${totalTime}</div>`;
    });
    document.getElementById('finishRanks').innerHTML = html;
    document.getElementById('finishFooter').textContent = 'âš¡å…‰æ¯”ğŸš¶æ­¥è¡Œå¿« 2.16 äº¿å€ï¼å¤ªé˜³çœŸçš„å¥½è¿œå¥½è¿œï¼';
    finishEl.classList.add('show');
}

// ============ æ—¶é—´æ ¼å¼åŒ– ============
function formatTime(seconds) {
    if (seconds < 1) return 'ä¸åˆ°1ç§’';
    if (seconds < 60) {
        return Math.floor(seconds) + 'ç§’';
    }
    if (seconds < 3600) {
        const m = Math.floor(seconds / 60);
        const s = Math.floor(seconds % 60);
        return s > 0 ? `${m}åˆ†${s}ç§’` : `${m}åˆ†é’Ÿ`;
    }
    if (seconds < 86400) {
        const h = Math.floor(seconds / 3600);
        const m = Math.floor((seconds % 3600) / 60);
        return m > 0 ? `${h}å°æ—¶${m}åˆ†` : `${h}å°æ—¶`;
    }
    const days = seconds / 86400;
    if (days < 30) {
        return Math.floor(days) + 'å¤©';
    }
    if (days < 365.25) {
        const months = Math.floor(days / 30.44);
        return months + 'ä¸ªæœˆ';
    }
    const years = seconds / (86400 * 365.25);
    if (years < 10) return years.toFixed(1) + 'å¹´';
    if (years < 1000) return Math.round(years) + 'å¹´';
    return Math.round(years).toLocaleString() + 'å¹´';
}

// ============ æ˜Ÿç©ºèƒŒæ™¯ ============
function createStars() {
    const el = document.getElementById('stars');
    for (let i = 0; i < 100; i++) {
        const s = document.createElement('div');
        s.className = 'star';
        const size = Math.random() * 2.5 + 0.5;
        s.style.cssText = `width:${size}px;height:${size}px;left:${Math.random()*100}%;top:${Math.random()*100}%;animation-delay:${Math.random()*3}s;animation-duration:${2+Math.random()*3}s;`;
        el.appendChild(s);
    }
}

// ============ å¯åŠ¨ ============
init();
</script>
</body>
</html>
