<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/xirong_favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/xirong_favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/xirong_favicon.ico">
  <link rel="mask-icon" href="/images/xirong_favicon.ico" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="google-site-verification" content="5dmcaaSOc-bn_UzxUiiSsDdc92W3oVCjqOZkRl0R-Rw">
  <meta name="baidu-site-verification" content="Xia7mO2IvK">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.ixirong.com","root":"/","scheme":"Mist","version":"7.7.2","exturl":false,"sidebar":{"position":"right","width":280,"display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="hbase 提供很方便的shell脚本，可以对数据表进行 CURD 操作，但是毕竟是有一定的学习成本的，基本上对于开发来讲，sql 语句都是看家本领，那么，有没有一种方法可以把 sql 语句转换成 hbase的原生API呢？ 这样就可以通过普通平常的 sql 来对hbase 进行数据的管理，使用成本大大降低。Apache Phoenix 组件就完成了这种需求，官方注解为 “Phoenix - we">
<meta property="og:type" content="article">
<meta property="og:title" content="使用Phoenix通过sql语句更新操作hbase数据">
<meta property="og:url" content="http://www.ixirong.com/2015/06/24/how-hbase-use-apache-phoenix/index.html">
<meta property="og:site_name" content="自由之路">
<meta property="og:description" content="hbase 提供很方便的shell脚本，可以对数据表进行 CURD 操作，但是毕竟是有一定的学习成本的，基本上对于开发来讲，sql 语句都是看家本领，那么，有没有一种方法可以把 sql 语句转换成 hbase的原生API呢？ 这样就可以通过普通平常的 sql 来对hbase 进行数据的管理，使用成本大大降低。Apache Phoenix 组件就完成了这种需求，官方注解为 “Phoenix - we">
<meta property="og:locale" content="zh">
<meta property="og:image" content="https://phoenix.apache.org/images/squirrel.png">
<meta property="article:published_time" content="2015-06-24T10:47:17.000Z">
<meta property="article:modified_time" content="2015-06-28T15:40:20.000Z">
<meta property="article:author" content="xirong">
<meta property="article:tag" content="phoenix">
<meta property="article:tag" content="hbase">
<meta property="article:tag" content="sql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://phoenix.apache.org/images/squirrel.png">

<link rel="canonical" href="http://www.ixirong.com/2015/06/24/how-hbase-use-apache-phoenix/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>使用Phoenix通过sql语句更新操作hbase数据 | 自由之路</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-61803765-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-61803765-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?5a116c8f8eef91fbfaee5377ab18526b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="自由之路" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">自由之路</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">学习科技理念，提升生活品质，追求思想自由之路</h1>
      
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-首页">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-归档">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-标签">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-公益">

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益</a>

  </li>
        <li class="menu-item menu-item-关于">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh">
    <link itemprop="mainEntityOfPage" href="http://www.ixirong.com/2015/06/24/how-hbase-use-apache-phoenix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xirong.jpg">
      <meta itemprop="name" content="xirong">
      <meta itemprop="description" content="思考生活，分享故事">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="自由之路">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          使用Phoenix通过sql语句更新操作hbase数据
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-06-24 18:47:17" itemprop="dateCreated datePublished" datetime="2015-06-24T18:47:17+08:00">2015-06-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          
            <span id="/2015/06/24/how-hbase-use-apache-phoenix/" class="post-meta-item leancloud_visitors" data-flag-title="使用Phoenix通过sql语句更新操作hbase数据" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <div class="post-description">hbase 提供很方便的shell脚本，可以对数据表进行 CURD 操作，但是毕竟是有一定的学习成本的，基本上对于开发来讲，sql 语句都是看家本领，那么，有没有一种方法可以把 sql 语句转换成 hbase的原生API呢？ 这样就可以通过普通平常的 sql 来对hbase 进行数据的管理，使用成本大大降低。Apache Phoenix 组件就完成了这种需求，官方注解为 “Phoenix - we put the SQL back in NoSql”，通过官方说明，Phoenix 的性能很高，相对于 hbase 原生的scan 并不会差多少，而对于类似的组件 hive、Impala等，性能有着显著的提升，详细请阅读 https://phoenix.apache.org/performance.html。</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>hbase 提供很方便的shell脚本，可以对数据表进行 CURD 操作，但是毕竟是有一定的学习成本的，基本上对于开发来讲，sql 语句都是看家本领，那么，有没有一种方法可以把 sql 语句转换成 hbase的原生API呢？ 这样就可以通过普通平常的 sql 来对hbase 进行数据的管理，使用成本大大降低。Apache Phoenix 组件就完成了这种需求，官方注解为 “Phoenix - we put the SQL back in NoSql”，通过官方说明，Phoenix 的性能很高，相对于 hbase 原生的scan 并不会差多少，而对于类似的组件 hive、Impala等，性能有着显著的提升，详细请阅读 <a href="https://phoenix.apache.org/performance.html。" target="_blank" rel="noopener">https://phoenix.apache.org/performance.html。</a></p>
<p>Apache Phoenix 官方站点：<a href="https://phoenix.apache.org/" target="_blank" rel="noopener">https://phoenix.apache.org/</a><br>Phoenix支持的sql语句： <a href="https://phoenix.apache.org/language/index.html" target="_blank" rel="noopener">https://phoenix.apache.org/language/index.html</a><br>Phoenix 支持的DataTypes：<a href="https://phoenix.apache.org/language/datatypes.html" target="_blank" rel="noopener">https://phoenix.apache.org/language/datatypes.html</a><br>Phoenix 支持的函数：<a href="https://phoenix.apache.org/language/functions.html" target="_blank" rel="noopener">https://phoenix.apache.org/language/functions.html</a></p>
<a id="more"></a>

<h1 id="一、安装使用"><a href="#一、安装使用" class="headerlink" title="一、安装使用"></a>一、安装使用</h1><p>Phoenix 安装很简单，下载对应hbase版本的Phoenix，<a href="https://phoenix.apache.org/download.html" target="_blank" rel="noopener">下载地址</a>，以<code>phoenix-4.4.0-HBase-0.98-bin.tar.gz</code>为例，解压文件，将<code>phoenix-4.4.0-server.jar</code> 拷贝到hbase安装目录的lib下，注意：每台regionserver均需要拷贝，重启hbase server即可，官方如下：</p>
<blockquote>
<ul>
<li><a href="https://phoenix.apache.org/download.html" target="_blank" rel="noopener">download</a> and expand the latest phoenix-[version]-bin.tar.</li>
<li>Add the phoenix-[version]-server.jar to the classpath of all HBase region server and master and remove any previous version. An easy way to do this is to copy it into the HBase lib directory (use phoenix-core-[version].jar for Phoenix 3.x)</li>
<li>restart the region servers</li>
<li>Add the phoenix-[version]-client.jar to the classpath of any Phoenix client.</li>
<li>download and setup <a href="https://phoenix.apache.org/installation.html#SQL_Client" target="_blank" rel="noopener">SQuirrel</a> as your SQL client so you can issue adhoc SQL against your HBase cluster</li>
</ul>
</blockquote>
<p>详情查看：<a href="https://phoenix.apache.org/Phoenix-in-15-minutes-or-less.html" target="_blank" rel="noopener">Phoenix-in-15-minutes</a> 。</p>
<h1 id="二、shell-命令"><a href="#二、shell-命令" class="headerlink" title="二、shell 命令"></a>二、shell 命令</h1><p>通过案例，create 表，插入语句，更新语句，删除语句案例，详细可参考：<a href="https://phoenix.apache.org/faq.html" target="_blank" rel="noopener">https://phoenix.apache.org/faq.html</a> </p>
<p>Phoenix 连接hbase的命令如下，<code>sqlline.py [zookeeper]</code> ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@slave2 lib]$ ./sqlline.py 10.35.66.72</span><br><span class="line">Setting property: [isolation, TRANSACTION_READ_COMMITTED]</span><br><span class="line">issuing: !connect jdbc:phoenix:10.35.66.72 none none org.apache.phoenix.jdbc.PhoenixDriver</span><br><span class="line">Connecting to jdbc:phoenix:10.35.66.72</span><br><span class="line">15/06/24 13:06:29 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Connected to: Phoenix (version 4.2)</span><br><span class="line">Driver: PhoenixEmbeddedDriver (version 4.2)</span><br><span class="line">Autocommit status: <span class="literal">true</span></span><br><span class="line">Transaction isolation: TRANSACTION_READ_COMMITTED</span><br><span class="line">Building list of tables and columns <span class="keyword">for</span> tab-completion (<span class="built_in">set</span> fastconnect to <span class="literal">true</span> to skip)...</span><br><span class="line">193/193 (100%) Done</span><br><span class="line">Done</span><br><span class="line">sqlline version 1.1.2</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt;!tables</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">|                TABLE_CAT                 |               TABLE_SCHEM                |                TABLE_NAME                |                TA |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">| null                                     | WL                                       | BIG_LOG_DEVUTRACEID_INDEX                | INDEX             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2_OWNERPAGE_INDEX | INDEX             |</span><br><span class="line">| null                                     | SYSTEM                                   | CATALOG                                  | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | SEQUENCE                                 | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | STATS                                    | SYSTEM TABLE      |</span><br><span class="line">| null                                     | DMO                                      | SOWNTOWN_STATICS                         | TABLE             |</span><br><span class="line">| null                                     | OL                                       | BIGLOG                                   | TABLE             |</span><br><span class="line">| null                                     | WL                                       | BIG_LOG                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | ERROR_LOG                                | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE                    | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2                 | TABLE             |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+------------------</span><br></pre></td></tr></table></figure>
<p>从上面能够看到，已经连接到了hbase集群上面，<code>Phoenix version 4.2</code> ，<code>sqlline version 4.2</code>  ，输入Phoenix支持的命令<code>！tables</code>可以查看当前集群中存在的数据表，能够看到有些是 <code>SYSTEM TABLE</code>，其它的都是自己建立的；</p>
<p>下面通过脚本来模拟下使用Phoenix建立数据表、修改表、添加数据、修改数据、删除数据、删除表等操作：</p>
<p>1、新建一张<code>Person</code>表，含有<code>IDCardNum</code>，<code>Name</code>，<code>Age</code> 三个字段 ，<code>test</code> 为<code>table_schem</code> ，标准sql如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> test.Person (IDCardNum <span class="built_in">INTEGER</span> <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>, <span class="keyword">Name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),Age <span class="built_in">INTEGER</span>);</span><br></pre></td></tr></table></figure>
<p>在 Phoenix 中使用如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:10.35.66.72&gt; create table IF NOT EXISTS test.Person (IDCardNum INTEGER not null primary key, Name varchar(20),Age INTEGER);</span><br><span class="line">No rows affected (0.344 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; !tables</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">|                TABLE_CAT                 |               TABLE_SCHEM                |                TABLE_NAME                |                TA |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">| null                                     | WL                                       | BIG_LOG_DEVUTRACEID_INDEX                | INDEX             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2_OWNERPAGE_INDEX | INDEX             |</span><br><span class="line">| null                                     | SYSTEM                                   | CATALOG                                  | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | SEQUENCE                                 | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | STATS                                    | SYSTEM TABLE      |</span><br><span class="line">| null                                     | DMO                                      | SOWNTOWN_STATICS                         | TABLE             |</span><br><span class="line">| null                                     | OL                                       | BIGLOG                                   | TABLE             |</span><br><span class="line">| null                                     | TEST                                     | PERSON                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | BIG_LOG                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | ERROR_LOG                                | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE                    | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2                 | TABLE             |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; select * from TEST.PERSON;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br></pre></td></tr></table></figure>
<p>可以看到，hbase中已经存在数据表 <code>Person</code>了，包含了三列。</p>
<p>2、对表进行插入操作，sql如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Person (IDCardNum,<span class="keyword">Name</span>,Age) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">'小明'</span>,<span class="number">12</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Person (IDCardNum,<span class="keyword">Name</span>,Age) <span class="keyword">values</span> (<span class="number">101</span>,<span class="string">'小红'</span>,<span class="number">15</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Person (IDCardNum,<span class="keyword">Name</span>,Age) <span class="keyword">values</span> (<span class="number">103</span>,<span class="string">'小王'</span>,<span class="number">22</span>);</span><br></pre></td></tr></table></figure>
<p>在 Phoenix 中插入的语句为 <code>upsert</code> ，具体如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.Person (IDCardNum,Name,Age) values (100,<span class="string">'小明'</span>,12);</span><br><span class="line">1 row affected (0.043 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.Person (IDCardNum,Name,Age) values (101,<span class="string">'小红'</span>,15);</span><br><span class="line">1 row affected (0.018 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.Person (IDCardNum,Name,Age) values (103,<span class="string">'小王'</span>,22);</span><br><span class="line">1 row affected (0.009 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; select * from test.Person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">| 100                                      | 小明                   | 12                                       |</span><br><span class="line">| 101                                      | 小红                   | 15                                       |</span><br><span class="line">| 103                                      | 小王                   | 22                                       |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+</span><br><span class="line">3 rows selected (0.115 seconds)</span><br></pre></td></tr></table></figure>
<p>从上面可以看到，三条数据已经进入hbase里面了；好了，现在要对表添加一列 <code>sex</code> 性别操作，怎么办？</p>
<p>3、alter 修改表数据，sql如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test.Persion <span class="keyword">ADD</span> sex <span class="built_in">varchar</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>Phoenix 中操作如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:10.35.66.72&gt; ALTER TABLE test.Person ADD sex varchar(10);</span><br><span class="line">No rows affected (0.191 seconds)</span><br><span class="line">: jdbc:phoenix:10.35.66.72&gt; select * from test.person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">| 100                                      | 小明                   | 12                                       | null       |</span><br><span class="line">| 101                                      | 小红                   | 15                                       | null       |</span><br><span class="line">| 103                                      | 小王                   | 22                                       | null       |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">3 rows selected (0.113 seconds)</span><br></pre></td></tr></table></figure>

<p>上图看到已经新增了列<code>sex</code>，每行的默认值为 <code>null</code> ，那么怎么样修改这些值呢？</p>
<p>4、 更新表数据 ，标准的sql 如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> test.Person <span class="keyword">set</span> sex=<span class="string">'男'</span> <span class="keyword">where</span> IDCardNum=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">update</span> test.Person <span class="keyword">set</span> sex=<span class="string">'女'</span> <span class="keyword">where</span> IDCardNum=<span class="number">101</span>;</span><br><span class="line"><span class="keyword">update</span> test.Person <span class="keyword">set</span> sex=<span class="string">'男'</span> <span class="keyword">where</span> IDCardNum=<span class="number">103</span>;</span><br></pre></td></tr></table></figure>
<p>Phoenix中不存在<code>update</code>的语法关键字，而是<code>upsert</code> ，功能上替代了<code>Insert+update</code>，官方说明为：</p>
<blockquote>
<p><strong>UPSERT VALUES</strong><br>Inserts if not present and updates otherwise the value in the table. The list of columns is optional and if not present, the values will map to the column in the order they are declared in the schema. The values must evaluate to constants.</p>
</blockquote>
<p>根据介绍，只需要在<code>upsert</code>语句中制定存在的<code>idcardnum</code>即可实现更新，在 Phoenix 客户端中操作如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.person (idcardnum,sex) values (100,<span class="string">'男'</span>);</span><br><span class="line">1 row affected (0.083 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.person (idcardnum,sex) values (101,<span class="string">'女'</span>);</span><br><span class="line">1 row affected (0.012 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.person (idcardnum,sex) values (103,<span class="string">'男'</span>);</span><br><span class="line">1 row affected (0.008 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; select * from test.person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">| 100                                      | 小明                   | 12                                       | 男          |</span><br><span class="line">| 101                                      | 小红                   | 15                                       | 女          |</span><br><span class="line">| 103                                      | 小王                   | 22                                       | 男          |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">3 rows selected (0.087 seconds)</span><br></pre></td></tr></table></figure>

<p>5、复杂查询，通过Phoenix可以支持 where、group by、case when 等复杂的查询条件，案例如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 现增加几条数据</span></span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.Person (IDCardNum,Name,Age,sex) values (104,<span class="string">'小张'</span>,23,<span class="string">'男'</span>);</span><br><span class="line">1 row affected (0.012 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.Person (IDCardNum,Name,Age,sex) values (105,<span class="string">'小李'</span>,28,<span class="string">'男'</span>);</span><br><span class="line">1 row affected (0.015 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; upsert into test.Person (IDCardNum,Name,Age,sex) values (106,<span class="string">'小李'</span>,33,<span class="string">'男'</span>);</span><br><span class="line">1 row affected (0.011 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; select * from test.person;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">| 100                                      | 小明                   | 12                                       | 男          |</span><br><span class="line">| 101                                      | 小红                   | 15                                       | 女          |</span><br><span class="line">| 103                                      | 小王                   | 22                                       | 男          |</span><br><span class="line">| 104                                      | 小张                   | 23                                       | 男          |</span><br><span class="line">| 105                                      | 小李                   | 28                                       | 男          |</span><br><span class="line">| 106                                      | 小李                   | 33                                       | 男          |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">6 rows selected (0.09 seconds)</span><br></pre></td></tr></table></figure>

<p>where + group by 语句例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jdbc:phoenix:10.35.66.72&gt; select sex ,count(sex) as num from test.person <span class="built_in">where</span> age &gt;20 group by sex;</span><br><span class="line">+------------+------------------------------------------+</span><br><span class="line">|    SEX     |                   NUM                    |</span><br><span class="line">+------------+------------------------------------------+</span><br><span class="line">| 男          | 4                                        |</span><br><span class="line">+------------+------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>case when 的例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:10.35.66.72&gt; select (<span class="keyword">case</span> name when <span class="string">'小明'</span> <span class="keyword">then</span> <span class="string">'明明啊'</span> when <span class="string">'小红'</span> <span class="keyword">then</span> <span class="string">'红红啊'</span> <span class="keyword">else</span> name end) as showname from test.person;</span><br><span class="line">+------------------------------------------+</span><br><span class="line">|                 SHOWNAME                 |</span><br><span class="line">+------------------------------------------+</span><br><span class="line">| 明明啊                                      |</span><br><span class="line">| 红红啊                                      |</span><br><span class="line">| 小王                                       |</span><br><span class="line">| 小张                                       |</span><br><span class="line">| 小李                                       |</span><br><span class="line">| 小李                                       |</span><br><span class="line">+------------------------------------------+</span><br></pre></td></tr></table></figure>
<p>更多支持语法参考：<a href="https://phoenix.apache.org/language/index.html" target="_blank" rel="noopener">https://phoenix.apache.org/language/index.html</a></p>
<p>6、删除数据及删除表，标准sql如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test.Person <span class="keyword">where</span> idcardnum=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> test.person;</span><br></pre></td></tr></table></figure>

<p>Phoenix中同标准sql一样，案例如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:10.35.66.72&gt; delete from test.Person <span class="built_in">where</span> idcardnum=100;</span><br><span class="line">1 row affected (0.072 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; select * from test.Person <span class="built_in">where</span> idcardnum=100;</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">|                IDCARDNUM                 |         NAME         |                   AGE                    |    SEX     |</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line">+------------------------------------------+----------------------+------------------------------------------+------------+</span><br><span class="line"></span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; drop table test.person;</span><br><span class="line">No rows affected (1.799 seconds)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; select * from test.person;</span><br><span class="line">Error: ERROR 1012 (42M03): Table undefined. tableName=TEST.PERSON (state=42M03,code=1012)</span><br><span class="line">0: jdbc:phoenix:10.35.66.72&gt; !tables</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">|                TABLE_CAT                 |               TABLE_SCHEM                |                TABLE_NAME                |                TA |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br><span class="line">| null                                     | WL                                       | BIG_LOG_DEVUTRACEID_INDEX                | INDEX             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2_OWNERPAGE_INDEX | INDEX             |</span><br><span class="line">| null                                     | SYSTEM                                   | CATALOG                                  | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | SEQUENCE                                 | SYSTEM TABLE      |</span><br><span class="line">| null                                     | SYSTEM                                   | STATS                                    | SYSTEM TABLE      |</span><br><span class="line">| null                                     | DMO                                      | SOWNTOWN_STATICS                         | TABLE             |</span><br><span class="line">| null                                     | OL                                       | BIGLOG                                   | TABLE             |</span><br><span class="line">| null                                     | WL                                       | BIG_LOG                                  | TABLE             |</span><br><span class="line">| null                                     | WL                                       | ERROR_LOG                                | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE                    | TABLE             |</span><br><span class="line">| null                                     | WL                                       | MSGCENTER_PUSHMESSAGE_V2                 | TABLE             |</span><br><span class="line">+------------------------------------------+------------------------------------------+------------------------------------------+-------------------+</span><br></pre></td></tr></table></figure>

<h1 id="三、图形化客户端SQuirrel使用"><a href="#三、图形化客户端SQuirrel使用" class="headerlink" title="三、图形化客户端SQuirrel使用"></a>三、图形化客户端SQuirrel使用</h1><p>如果你不喜欢 终端下的脚本命令，青睐于GUI化的客户端，那么 SQuirrel是个好的选择，就跟平日里使用 MsSqlServer client、Navicat client 一样，效果如下图：</p>
<p><img data-src="https://phoenix.apache.org/images/squirrel.png" alt="squirrel client"></p>
<p>使用方法：（可以参照<a href="https://phoenix.apache.org/installation.html#SQL_Client" target="_blank" rel="noopener">官网英文说明</a>）</p>
<ol>
<li>下载SQuirrel 客户端 ，地址 <a href="http://squirrel-sql.sourceforge.net/" target="_blank" rel="noopener">http://squirrel-sql.sourceforge.net/</a></li>
<li>解压缩，删除 <code>lib/</code> 下老版本的 <code>phoenix-[oldversion]-client.jar</code>文件，将你刚刚下载的Phoenix文件夹下最新的文件 拷贝过去；</li>
<li>启动SQuirrel客户端，选择 Drivers-new driver ，名称随便，url格式： <code>jdbc:phoenix:（zk地址）</code> ，class name textbox 填写<code>org.apache.phoenix.jdbc.PhoenixDriver</code> </li>
<li>ok， 点击 connect即可完成连接 </li>
</ol>
<p>squirrel 客户端的用法 和 Phoenix 自带终端一样，都是常见的sql语句，大家可以自己搭建练习。</p>
<h1 id="四、-java-client-api-使用"><a href="#四、-java-client-api-使用" class="headerlink" title="四、 java client api 使用"></a>四、 java client api 使用</h1><p>java api 完全可以采用传统的 jdbc 连接的形式，案例如官方提供：</p>
<p>创建<code>test.java</code> 类，内容如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">		Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">		ResultSet rset = <span class="keyword">null</span>;</span><br><span class="line">		</span><br><span class="line">		Connection con = DriverManager.getConnection(<span class="string">"jdbc:phoenix:[zookeeper]"</span>);</span><br><span class="line">		stmt = con.createStatement();</span><br><span class="line">		</span><br><span class="line">		stmt.executeUpdate(<span class="string">"create table test (mykey integer not null primary key, mycolumn varchar)"</span>);</span><br><span class="line">		stmt.executeUpdate(<span class="string">"upsert into test values (1,'Hello')"</span>);</span><br><span class="line">		stmt.executeUpdate(<span class="string">"upsert into test values (2,'World!')"</span>);</span><br><span class="line">		con.commit();</span><br><span class="line">		</span><br><span class="line">		PreparedStatement statement = con.prepareStatement(<span class="string">"select * from test"</span>);</span><br><span class="line">		rset = statement.executeQuery();</span><br><span class="line">		<span class="keyword">while</span> (rset.next()) &#123;</span><br><span class="line">			System.out.println(rset.getString(<span class="string">"mycolumn"</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		statement.close();</span><br><span class="line">		con.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在终端使用<code>javac</code>编译，通过Phoenix客户端执行，就能看到结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ javac test.java</span><br><span class="line">$ java -cp <span class="string">"../phoenix-[version]-client.jar:."</span> <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You should get the following output</span></span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>

<p>当然，在生产使用中，往往采用的是 <code>spring mvc + mybaits</code> 的框架来进行访问的，Phoenix 完全支持这种形式，就像平常写mysql、SqlServer一样，对应的<code>jdbc.properties</code>中的驱动修改为 <code>org.apache.phoenix.jdbc.PhoenixDriver</code> 即可，其它的写法通普通的一样。 </p>

    </div>

    
    
    
        <div class="reward-container">
  <div>以梦为马，不负韶华</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/iwechatpay.png" alt="xirong WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/ialipay.png" alt="xirong Alipay">
        <p>Alipay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/ipaypal.png" alt="xirong PayPal">
        <p>PayPal</p>
      </div>

  </div>
</div>

        

  <div class="followme">
    <p>Welcome to my other publishing channels</p>

    <div class="social-list">

            <div class="social-item">
              <a target="_blank" class="social-link" href="/atom.xml">
                <span class="icon">
                  <i class="fa fa-rss"></i>
                </span>

                <span class="label">RSS</span>
              </a>
            </div>

            <div class="social-item">
              <a target="_blank" class="social-link" href="/images/technologyNotes.jpg">
                <span class="icon">
                  <i class="fa fa-wechat"></i>
                </span>

                <span class="label">WeChat</span>
              </a>
            </div>

            <div class="social-item">
              <a target="_blank" class="social-link" href="https://t.me/freedompath">
                <span class="icon">
                  <i class="fa fa-telegram"></i>
                </span>

                <span class="label">Telegram</span>
              </a>
            </div>
    </div>
  </div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/hbase/" rel="tag"><i class="fa fa-tag"></i> hbase</a>
              <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" rel="tag"><i class="fa fa-tag"></i> 大数据</a>
              <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag"><i class="fa fa-tag"></i> 中间件</a>
              <a href="/tags/phoenix/" rel="tag"><i class="fa fa-tag"></i> phoenix</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2015/06/20/materials-about-sql/" rel="prev" title="sql语句基础复习及资料推荐">
      <i class="fa fa-chevron-left"></i> sql语句基础复习及资料推荐
    </a></div>
      <div class="post-nav-item">
    <a href="/2015/06/28/the-things-i-thought-of-kaifuli/" rel="next" title="我所敬佩的开复老师">
      我所敬佩的开复老师 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、安装使用"><span class="nav-number">1.</span> <span class="nav-text">一、安装使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、shell-命令"><span class="nav-number">2.</span> <span class="nav-text">二、shell 命令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、图形化客户端SQuirrel使用"><span class="nav-number">3.</span> <span class="nav-text">三、图形化客户端SQuirrel使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、-java-client-api-使用"><span class="nav-number">4.</span> <span class="nav-text">四、 java client api 使用</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="xirong"
      src="/images/xirong.jpg">
  <p class="site-author-name" itemprop="name">xirong</p>
  <div class="site-description" itemprop="description">思考生活，分享故事</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">116</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xirong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xirong" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:ixirong.liu@gmail.com" title="Mail → mailto:ixirong.liu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.zhoujingen.cn/blog/" title="http:&#x2F;&#x2F;www.zhoujingen.cn&#x2F;blog&#x2F;" rel="noopener" target="_blank">敏捷个人</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.ruanyifeng.com/blog/" title="http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;" rel="noopener" target="_blank">阮一峰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://coolshell.cn/" title="http:&#x2F;&#x2F;coolshell.cn&#x2F;" rel="noopener" target="_blank">酷壳</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xirong</span>
</div>

        






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.dataset.flagTitle;

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=HfEUHBkxIxPKFFWsM8E29K81-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : 'HfEUHBkxIxPKFFWsM8E29K81-gzGzoHsz',
            'X-LC-Key'    : 'j8gTHCF5cxmeGRbV0QIujeUw',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script>
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','CMcqT-2yt1yatw_zFhNC','2.0.0');
</script>













  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '2d23e56450208acec766',
      clientSecret: '2e82dd85f9110fd86aaa0bb5b78e23712738d3f3',
      repo        : 'xirong.github.io',
      owner       : 'xirong',
      admin       : ['xirong'],
      id          : '25892a4131f26eb863905d4f48516475',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
