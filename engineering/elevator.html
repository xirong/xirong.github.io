<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGO Technic Elevator - Giant KONE Á≤æÁªÜÂ§çÂàªÁâà V2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(180deg, #e8e8e8 0%, #d0d0d0 50%, #c0c0c0 100%);
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
            display: flex;
        }

        .main-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .scene {
            width: 700px;
            height: 950px;
            perspective: 2400px;
            perspective-origin: 50% 45%;
        }

        .elevator-world {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(-8deg) rotateY(-25deg);
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ===================== LEGO Technic Ê¢ÅÁªÑ‰ª∂ - Â¢ûÂº∫Áâà ===================== */
        .technic-beam {
            position: absolute;
            transform-style: preserve-3d;
        }

        .beam-face {
            position: absolute;
            backface-visibility: visible;
        }

        /* Ê¢ÅÁöÑ6‰∏™Èù¢ */
        .bf-front {
            transform: translateZ(var(--depth, 6px));
        }

        .bf-back {
            transform: translateZ(calc(-1 * var(--depth, 6px))) rotateY(180deg);
        }

        .bf-left {
            transform: rotateY(-90deg) translateZ(var(--depth, 6px));
        }

        .bf-right {
            transform: rotateY(90deg) translateZ(var(--w-half, 6px));
        }

        .bf-top {
            transform: rotateX(90deg) translateZ(var(--h-half, 6px));
        }

        .bf-bottom {
            transform: rotateX(-90deg) translateZ(var(--h-half, 6px));
        }

        /* ÈªëËâ≤Ê¢Å - Â¢ûÂº∫Á∫πÁêÜ */
        .beam-black .bf-front,
        .beam-black .bf-back {
            background: linear-gradient(90deg, #1a1a1a 0%, #2d2d2d 30%, #353535 50%, #2d2d2d 70%, #1a1a1a 100%);
            border-radius: 2px;
            box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.1), inset 0 -1px 2px rgba(0, 0, 0, 0.3);
        }

        .beam-black .bf-left,
        .beam-black .bf-right {
            background: linear-gradient(180deg, #252525 0%, #1a1a1a 100%);
        }

        .beam-black .bf-top,
        .beam-black .bf-bottom {
            background: linear-gradient(90deg, #202020 0%, #2a2a2a 50%, #202020 100%);
        }

        /* Ê∑±ÁÅ∞Ëâ≤Ê¢Å */
        .beam-dgray .bf-front,
        .beam-dgray .bf-back {
            background: linear-gradient(90deg, #404040 0%, #555 30%, #606060 50%, #555 70%, #404040 100%);
            border-radius: 2px;
            box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.15), inset 0 -1px 2px rgba(0, 0, 0, 0.2);
        }

        .beam-dgray .bf-left,
        .beam-dgray .bf-right {
            background: linear-gradient(180deg, #505050 0%, #404040 100%);
        }

        .beam-dgray .bf-top,
        .beam-dgray .bf-bottom {
            background: linear-gradient(90deg, #454545 0%, #555 50%, #454545 100%);
        }

        /* ÊµÖÁÅ∞Ëâ≤Ê¢Å - ÁúüÂÆû‰πêÈ´òÊµÖÁÅ∞Ëâ≤ */
        .beam-lgray .bf-front,
        .beam-lgray .bf-back {
            background: linear-gradient(90deg, #a0a0a0 0%, #bbb 30%, #c8c8c8 50%, #bbb 70%, #a0a0a0 100%);
            border-radius: 2px;
            box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.4), inset 0 -1px 2px rgba(0, 0, 0, 0.15);
        }

        .beam-lgray .bf-left,
        .beam-lgray .bf-right {
            background: linear-gradient(180deg, #b5b5b5 0%, #a0a0a0 100%);
        }

        .beam-lgray .bf-top,
        .beam-lgray .bf-bottom {
            background: linear-gradient(90deg, #aaa 0%, #bbb 50%, #aaa 100%);
        }

        /* ÈªÑËâ≤Ê¢Å */
        .beam-yellow .bf-front,
        .beam-yellow .bf-back {
            background: linear-gradient(90deg, #d4a00d 0%, #f4c430 30%, #ffd84a 50%, #f4c430 70%, #d4a00d 100%);
            border-radius: 2px;
            box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.4), inset 0 -1px 2px rgba(0, 0, 0, 0.2);
        }

        .beam-yellow .bf-left,
        .beam-yellow .bf-right {
            background: linear-gradient(180deg, #e8b815 0%, #d4a00d 100%);
        }

        .beam-yellow .bf-top,
        .beam-yellow .bf-bottom {
            background: linear-gradient(90deg, #dab012 0%, #f0c020 50%, #dab012 100%);
        }

        /* Ê©ôËâ≤Ê¢Å */
        .beam-orange .bf-front,
        .beam-orange .bf-back {
            background: linear-gradient(90deg, #e67300 0%, #ff9020 30%, #ffa040 50%, #ff9020 70%, #e67300 100%);
            border-radius: 2px;
            box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.3), inset 0 -1px 2px rgba(0, 0, 0, 0.2);
        }

        .beam-orange .bf-left,
        .beam-orange .bf-right {
            background: linear-gradient(180deg, #f08000 0%, #e67300 100%);
        }

        .beam-orange .bf-top,
        .beam-orange .bf-bottom {
            background: linear-gradient(90deg, #f08000 0%, #ff8c00 50%, #f08000 100%);
        }

        /* ÁôΩËâ≤Ê¢Å */
        .beam-white .bf-front,
        .beam-white .bf-back {
            background: linear-gradient(90deg, #e8e8e8 0%, #f5f5f5 30%, #fff 50%, #f5f5f5 70%, #e8e8e8 100%);
            border-radius: 2px;
            box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.8), inset 0 -1px 2px rgba(0, 0, 0, 0.1);
        }

        .beam-white .bf-left,
        .beam-white .bf-right {
            background: linear-gradient(180deg, #f8f8f8 0%, #e8e8e8 100%);
        }

        .beam-white .bf-top,
        .beam-white .bf-bottom {
            background: linear-gradient(90deg, #f0f0f0 0%, #fafafa 50%, #f0f0f0 100%);
        }

        /* TechnicÂúÜÂ≠î - Â¢ûÂº∫Áâà */
        .holes-container {
            position: absolute;
            width: 100%;
            height: 100%;
            transform: translateZ(var(--depth, 6px));
            pointer-events: none;
        }

        .technic-hole {
            position: absolute;
            border-radius: 50%;
            box-shadow:
                inset 0 1px 3px rgba(0, 0, 0, 0.9),
                inset 0 -1px 1px rgba(255, 255, 255, 0.2),
                0 0.5px 0 rgba(255, 255, 255, 0.15);
        }

        /* ÂúÜÂ≠îÂÜÖÁöÑÂçÅÂ≠óËΩ¥Â≠î */
        .technic-hole::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40%;
            height: 40%;
            transform: translate(-50%, -50%);
            background: inherit;
            border-radius: 0;
        }

        .beam-black .technic-hole {
            background: radial-gradient(circle, #000 0%, #0a0a0a 60%, #151515 100%);
        }

        .beam-dgray .technic-hole {
            background: radial-gradient(circle, #252525 0%, #333 60%, #404040 100%);
        }

        .beam-lgray .technic-hole {
            background: radial-gradient(circle, #606060 0%, #757575 60%, #8a8a8a 100%);
        }

        .beam-yellow .technic-hole {
            background: radial-gradient(circle, #8a6a08 0%, #a57a0a 60%, #b58510 100%);
        }

        .beam-orange .technic-hole {
            background: radial-gradient(circle, #8a4500 0%, #a55500 60%, #b56500 100%);
        }

        .beam-white .technic-hole {
            background: radial-gradient(circle, #808080 0%, #909090 60%, #a0a0a0 100%);
        }

        /* ËøûÊé•ÈîÄ - Êõ¥ÁúüÂÆû */
        .pin {
            position: absolute;
            border-radius: 50%;
            transform-style: preserve-3d;
        }

        .pin-body {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow:
                inset 2px 2px 3px rgba(255, 255, 255, 0.4),
                inset -2px -2px 3px rgba(0, 0, 0, 0.4),
                0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .pin-black .pin-body {
            background: radial-gradient(circle at 30% 30%, #555 0%, #333 50%, #1a1a1a 100%);
        }

        .pin-yellow .pin-body {
            background: radial-gradient(circle at 30% 30%, #ffe060 0%, #f4c430 50%, #c9a00c 100%);
        }

        .pin-blue .pin-body {
            background: radial-gradient(circle at 30% 30%, #5aa0e9 0%, #3498db 50%, #1a6aaa 100%);
        }

        .pin-red .pin-body {
            background: radial-gradient(circle at 30% 30%, #ff6b6b 0%, #e74c3c 50%, #a93226 100%);
        }

        .pin-gray .pin-body {
            background: radial-gradient(circle at 30% 30%, #b0b0b0 0%, #888 50%, #606060 100%);
        }

        .pin-tan .pin-body {
            background: radial-gradient(circle at 30% 30%, #e8d4a0 0%, #d4b896 50%, #b8986a 100%);
        }

        /* ===================== ÈΩøËΩÆÁªÑ‰ª∂ - Â§ßÂπÖÂ¢ûÂº∫ ===================== */
        .gear {
            position: absolute;
            transform-style: preserve-3d;
        }

        .gear-body {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .gear-disc {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .gear-disc-front {
            background: radial-gradient(circle at 35% 35%, #ffe580 0%, #f4c430 35%, #d4a00d 70%, #b08010 100%);
            transform: translateZ(6px);
            box-shadow:
                inset 0 3px 8px rgba(255, 255, 255, 0.6),
                inset 0 -3px 8px rgba(0, 0, 0, 0.3),
                0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .gear-disc-back {
            background: radial-gradient(circle at 65% 65%, #c9a00c 0%, #a08008 50%, #8a6a05 100%);
            transform: translateZ(-6px);
        }

        /* ÈΩøËΩÆËæπÁºòÂéöÂ∫¶ */
        .gear-edge {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 12px solid;
            border-color: #b08010;
            transform: translateZ(0);
            box-sizing: border-box;
        }

        .gear-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(7px);
            background: radial-gradient(circle, #1a1a1a 0%, #2a2a2a 70%, #3a3a3a 100%);
            border-radius: 50%;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.9);
        }

        .gear-cross {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(8px);
        }

        .gear-cross::before,
        .gear-cross::after {
            content: '';
            position: absolute;
            background: #0a0a0a;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .gear-cross::before {
            width: 100%;
            height: 30%;
            top: 35%;
            left: 0;
        }

        .gear-cross::after {
            width: 30%;
            height: 100%;
            left: 35%;
            top: 0;
        }

        .gear-teeth-container {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .gear-tooth {
            position: absolute;
            top: -4px;
            left: 50%;
            margin-left: -5px;
            width: 10px;
            height: 8px;
            background: linear-gradient(180deg, #ffd84a 0%, #f4c430 50%, #d4a00d 100%);
            border-radius: 3px 3px 0 0;
            transform-origin: center bottom;
            box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.25);
        }

        .gear-tooth::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #c9a00c 0%, #a08008 100%);
            transform: translateZ(-12px);
            border-radius: 3px 3px 0 0;
        }

        /* ÈΩøËΩÆËæêÊù° */
        .gear-spoke {
            position: absolute;
            top: 50%;
            left: 50%;
            background: linear-gradient(90deg, #b08010 0%, #d4a00d 50%, #b08010 100%);
            transform-origin: left center;
            height: 4px;
            border-radius: 2px;
        }

        @keyframes gearSpin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes gearSpinR {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(-360deg);
            }
        }

        .gear.spinning .gear-body {
            animation: gearSpin 2s linear infinite;
        }

        .gear.spinning-r .gear-body {
            animation: gearSpinR 2s linear infinite;
        }

        /* ÊªëËΩÆ - Â¢ûÂº∫Áâà */
        .pulley {
            position: absolute;
            transform-style: preserve-3d;
        }

        .pulley-disc {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .pulley-front {
            background: radial-gradient(circle at 35% 35%, #b0b0b0 0%, #909090 40%, #707070 80%, #505050 100%);
            transform: translateZ(6px);
            box-shadow: inset 0 3px 6px rgba(255, 255, 255, 0.4), inset 0 -3px 6px rgba(0, 0, 0, 0.4);
        }

        .pulley-back {
            background: radial-gradient(circle at 65% 65%, #707070 0%, #555 100%);
            transform: translateZ(-6px);
        }

        .pulley-groove {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(7px);
            border: 5px solid #4a4a4a;
            border-radius: 50%;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.6);
        }

        .pulley-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(7px);
            background: radial-gradient(circle, #1a1a1a 0%, #333 100%);
            border-radius: 50%;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.8);
        }

        /* ===================== ÁîµÊ¢ØËΩøÂé¢ - Áî®TechnicÊ¢ÅÊûÑÂª∫ ===================== */
        .elevator-car {
            position: absolute;
            left: 50%;
            transform-style: preserve-3d;
            z-index: 10;
        }

        .car-frame {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        /* ËΩøÂé¢Èù¢Êùø - TechnicÈ£éÊ†º */
        .car-panel {
            position: absolute;
            transform-style: preserve-3d;
        }

        .car-front-panel {
            position: absolute;
            width: 100%;
            height: 100%;
            transform: translateZ(var(--car-depth));
            background: linear-gradient(180deg, #f8f8f8 0%, #eee 30%, #e5e5e5 70%, #ddd 100%);
            border: 3px solid #999;
            border-radius: 4px;
            box-shadow:
                inset 0 2px 5px rgba(255, 255, 255, 0.8),
                inset 0 -2px 5px rgba(0, 0, 0, 0.1);
        }

        .car-back-panel {
            position: absolute;
            width: 100%;
            height: 100%;
            transform: translateZ(calc(-1 * var(--car-depth))) rotateY(180deg);
            background: linear-gradient(180deg, #e8e8e8 0%, #d8d8d8 100%);
            border: 2px solid #888;
            border-radius: 3px;
        }

        .car-side-panel {
            position: absolute;
            width: calc(var(--car-depth) * 2);
            height: 100%;
            background: linear-gradient(180deg, #f0f0f0 0%, #e0e0e0 100%);
            border: 2px solid #999;
            border-radius: 3px;
        }

        .car-side-left {
            transform: rotateY(-90deg) translateZ(calc(var(--car-width) / 2));
        }

        .car-side-right {
            transform: rotateY(90deg) translateZ(calc(var(--car-width) / 2));
        }

        .car-top-panel {
            position: absolute;
            width: 100%;
            height: calc(var(--car-depth) * 2);
            transform: rotateX(90deg) translateZ(0);
            background: linear-gradient(135deg, #e0e0e0 0%, #d0d0d0 100%);
            border: 2px solid #888;
            border-radius: 3px;
        }

        .car-bottom-panel {
            position: absolute;
            width: 100%;
            height: calc(var(--car-depth) * 2);
            transform: rotateX(-90deg) translateZ(var(--car-height));
            background: linear-gradient(135deg, #c0c0c0 0%, #a8a8a8 100%);
            border: 2px solid #888;
            border-radius: 3px;
        }

        /* ÁîµÊ¢ØÈó® */
        .door-frame {
            position: absolute;
            top: 10px;
            left: 12px;
            right: 12px;
            bottom: 10px;
            background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
            border-radius: 4px;
            overflow: hidden;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.7);
        }

        .door-inner {
            position: absolute;
            top: 4px;
            left: 4px;
            right: 4px;
            bottom: 4px;
            background: #d8d8d8;
            border-radius: 3px;
            overflow: hidden;
        }

        .door-panel {
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(180deg,
                    #f8f8f8 0%,
                    #f0f0f0 15%,
                    #e8e8e8 40%,
                    #e0e0e0 60%,
                    #d8d8d8 85%,
                    #d0d0d0 100%);
            transition: transform 1s ease-in-out;
        }

        .door-left {
            left: 0;
            border-right: 2px solid #aaa;
        }

        .door-right {
            right: 0;
            border-left: 2px solid #aaa;
        }

        .door-left.open {
            transform: translateX(-96%);
        }

        .door-right.open {
            transform: translateX(96%);
        }

        /* Èó®‰∏äÁöÑÊ®™Á∫π */
        .door-lines {
            position: absolute;
            top: 4%;
            left: 6%;
            right: 6%;
            height: 92%;
            background: repeating-linear-gradient(180deg,
                    transparent 0px,
                    transparent 12px,
                    #c0c0c0 12px,
                    #c0c0c0 13px);
        }

        /* Giant KONEÊ†áÂøó */
        .kone-label {
            position: absolute;
            bottom: 6px;
            left: 50%;
            transform: translateX(-50%) translateZ(2px);
            font-size: 8px;
            font-weight: bold;
            color: #1a5490;
            background: rgba(255, 255, 255, 0.95);
            padding: 3px 8px;
            border-radius: 2px;
            letter-spacing: 0.8px;
            white-space: nowrap;
            border: 1px solid #bbb;
            font-family: Arial, sans-serif;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* ===================== Èí¢ÁºÜ ===================== */
        .cable {
            position: absolute;
            width: 4px;
            background: linear-gradient(90deg, #111 0%, #444 30%, #555 50%, #444 70%, #111 100%);
            transform-style: preserve-3d;
            box-shadow:
                0 0 4px rgba(0, 0, 0, 0.6),
                1px 1px 2px rgba(0, 0, 0, 0.4),
                -1px 0 2px rgba(80, 80, 80, 0.3);
            border-radius: 2px;
        }

        /* Èí¢ÁºÜÁ∫πÁêÜ - Êõ¥Ê∏ÖÊô∞ÁöÑËû∫ÊóãÁ∫πÁêÜ */
        .cable-textured {
            background: repeating-linear-gradient(180deg,
                    #222 0px,
                    #222 2px,
                    #444 2px,
                    #444 4px,
                    #333 4px,
                    #333 6px);
        }

        /* ÈÖçÈáçÁºÜÁª≥ - Áï•Êúâ‰∏çÂêåÁöÑÈ¢úËâ≤‰ª•Âå∫ÂàÜ */
        .cable-counterweight {
            background: repeating-linear-gradient(180deg,
                    #1a1a1a 0px,
                    #1a1a1a 2px,
                    #3a3a3a 2px,
                    #3a3a3a 4px);
        }

        /* ===================== ÈìæÊù°ÂØºËΩ® - ‰πêÈ´òTechnicÈìæÊù° ===================== */
        .chain-guide {
            position: absolute;
            width: 8px;
            background: repeating-linear-gradient(180deg,
                    #1a1a1a 0px,
                    #1a1a1a 4px,
                    #333 4px,
                    #333 5px,
                    #1a1a1a 5px,
                    #1a1a1a 8px,
                    #444 8px,
                    #444 9px);
            transform-style: preserve-3d;
            box-shadow:
                1px 0 2px rgba(0, 0, 0, 0.5),
                -1px 0 2px rgba(60, 60, 60, 0.3);
            border-radius: 1px;
        }

        .chain-guide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: repeating-linear-gradient(180deg,
                    #555 0px,
                    #555 3px,
                    #333 3px,
                    #333 6px);
        }

        /* ===================== Á∫¢Ëâ≤ÁºìÂÜ≤ÂºπÁ∞ß - Â¢ûÂº∫Áâà ===================== */
        .spring-buffer {
            position: absolute;
            transform-style: preserve-3d;
        }

        .spring-coil {
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(180deg,
                    #e74c3c 0px,
                    #e74c3c 5px,
                    #c0392b 5px,
                    #c0392b 7px,
                    #a93226 7px,
                    #a93226 8px);
            border-radius: 6px;
            transform: translateZ(10px);
            box-shadow:
                inset 4px 0 6px rgba(255, 100, 100, 0.3),
                inset -4px 0 6px rgba(0, 0, 0, 0.3),
                2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .spring-cap {
            position: absolute;
            width: 130%;
            height: 10px;
            left: -15%;
            background: linear-gradient(180deg, #d63031 0%, #a93226 50%, #7f1d1d 100%);
            border-radius: 3px;
            transform: translateZ(10px);
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3);
        }

        .spring-top {
            top: -2px;
        }

        .spring-bottom {
            bottom: -2px;
        }

        /* ===================== ÈÖçÈáçÂùó ===================== */
        .counterweight {
            position: absolute;
            transform-style: preserve-3d;
        }

        .cw-panel {
            position: absolute;
            border-radius: 2px;
        }

        .cw-front {
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #555 0%, #777 30%, #888 50%, #777 70%, #555 100%);
            transform: translateZ(15px);
            box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.2), inset 0 -2px 4px rgba(0, 0, 0, 0.3);
        }

        .cw-back {
            width: 100%;
            height: 100%;
            background: #4a4a4a;
            transform: translateZ(-15px) rotateY(180deg);
        }

        .cw-side {
            width: 30px;
            height: 100%;
            background: linear-gradient(180deg, #606060 0%, #4a4a4a 100%);
        }

        .cw-left {
            transform: rotateY(-90deg) translateZ(18px);
        }

        .cw-right {
            transform: rotateY(90deg) translateZ(18px);
        }

        /* ÈÖçÈáçÂùóÁöÑÂ±ÇÂè†ÊïàÊûú */
        .cw-weights {
            position: absolute;
            top: 8px;
            left: 5px;
            right: 5px;
            bottom: 8px;
            background: repeating-linear-gradient(180deg,
                    #9a9a9a 0px,
                    #9a9a9a 14px,
                    #666 14px,
                    #666 16px);
            transform: translateZ(16px);
            border-radius: 2px;
            box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.2);
        }

        /* ===================== Ê•ºÂ±ÇÈó®Ê°Ü ===================== */
        .floor-door-frame {
            position: absolute;
            transform-style: preserve-3d;
        }

        /* ===================== Ê•ºÂ±ÇÊ†áËØÜ ===================== */
        .floor-marker {
            position: absolute;
            width: 32px;
            height: 26px;
            background: linear-gradient(180deg, #1a252f 0%, #0f1419 100%);
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #2ecc71;
            font-weight: bold;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 10px rgba(46, 204, 113, 0.7);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4), inset 0 1px 1px rgba(255, 255, 255, 0.1);
        }

        /* ===================== Ë≠¶ÂëäÊ†áÂøó ===================== */
        .warning-sign {
            position: absolute;
            transform-style: preserve-3d;
        }

        .warning-body {
            position: relative;
            width: 0;
            height: 0;
            border-left: 22px solid transparent;
            border-right: 22px solid transparent;
            border-bottom: 38px solid #f4c430;
            filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.4));
        }

        .warning-border {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-bottom: 32px solid #1a1a1a;
            top: 4px;
            left: 4px;
        }

        .warning-inner {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 16px solid transparent;
            border-right: 16px solid transparent;
            border-bottom: 28px solid #f4c430;
            top: 6px;
            left: 6px;
        }

        .warning-icon {
            position: absolute;
            top: 14px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            color: #1a1a1a;
            font-weight: bold;
        }

        .warning-text {
            position: absolute;
            top: 42px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 6px;
            color: #1a1a1a;
            white-space: nowrap;
            background: #f4c430;
            padding: 2px 4px;
            border-radius: 2px;
            font-weight: bold;
        }

        /* ===================== Â∫ïÂ∫ß ===================== */
        .base-plate {
            position: absolute;
            bottom: 0;
            transform-style: preserve-3d;
        }

        .base-top-face {
            position: absolute;
            background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 50%, #d8d8d8 100%);
            border-radius: 6px;
            box-shadow: inset 0 0 25px rgba(0, 0, 0, 0.1);
        }

        /* Â∫ïÂ∫ßÂúÜÈíâ - ÁúüÂÆû‰πêÈ´òÈ£éÊ†º */
        .base-stud {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle at 35% 35%, #fff 0%, #e8e8e8 40%, #d0d0d0 100%);
            border-radius: 50%;
            box-shadow:
                inset 0 3px 4px rgba(255, 255, 255, 0.6),
                inset 0 -3px 4px rgba(0, 0, 0, 0.15),
                0 3px 4px rgba(0, 0, 0, 0.25);
        }

        .base-stud-blue {
            background: radial-gradient(circle at 35% 35%, #5aa0e9 0%, #3498db 40%, #2070b0 100%);
        }

        /* ===================== ÊéßÂà∂Èù¢Êùø ===================== */
        .control-panel {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.4);
            z-index: 100;
            width: 180px;
        }

        .panel-section {
            margin-bottom: 12px;
        }

        .panel-title {
            color: #f4c430;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            text-align: center;
        }

        .view-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
        }

        .view-btn {
            padding: 8px 4px;
            border: none;
            border-radius: 5px;
            background: linear-gradient(180deg, #4a4a4a 0%, #3a3a3a 100%);
            color: #fff;
            font-size: 9px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .view-btn:hover {
            background: linear-gradient(180deg, #5a5a5a 0%, #4a4a4a 100%);
        }

        .view-btn.active {
            background: linear-gradient(180deg, #3498db 0%, #2980b9 100%);
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }

        .floor-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
        }

        .floor-btn {
            padding: 12px 0;
            border: none;
            border-radius: 5px;
            background: linear-gradient(180deg, #4a4a4a 0%, #3a3a3a 100%);
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.15s;
        }

        .floor-btn:hover {
            background: linear-gradient(180deg, #5a5a5a 0%, #4a4a4a 100%);
        }

        .floor-btn.active {
            background: linear-gradient(180deg, #f8d840 0%, #f4c430 100%);
            color: #1a1a1a;
            box-shadow: 0 0 15px rgba(244, 196, 48, 0.5);
        }

        .status-display {
            background: #0a0a0a;
            padding: 8px;
            border-radius: 5px;
            text-align: center;
            margin-bottom: 8px;
        }

        .status-floor {
            color: #2ecc71;
            font-size: 28px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 12px rgba(46, 204, 113, 0.6);
        }

        .status-text {
            color: #f4c430;
            font-size: 9px;
            margin-top: 3px;
        }

        .ctrl-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .ctrl-btn {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(180deg, #4a4a4a 0%, #3a3a3a 100%);
            color: #fff;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .ctrl-btn:hover {
            background: linear-gradient(180deg, #5a5a5a 0%, #4a4a4a 100%);
        }

        .ctrl-btn.on {
            background: linear-gradient(180deg, #27ae60 0%, #2ecc71 100%);
            box-shadow: 0 0 12px rgba(46, 204, 113, 0.5);
        }

        .hint {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            color: #666;
            font-size: 11px;
        }

        /* ËΩ¥/ÊùÜ */
        .axle {
            position: absolute;
            transform-style: preserve-3d;
        }

        .axle-body {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #2a2a2a 0%, #4a4a4a 50%, #2a2a2a 100%);
            border-radius: 2px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .axle-body.yellow {
            background: linear-gradient(90deg, #b08010 0%, #f4c430 50%, #b08010 100%);
        }

        /* ÈÖçÈáçÂØºËΩ® */
        .cw-rail {
            position: absolute;
            background: linear-gradient(90deg, #3a3a3a 0%, #5a5a5a 50%, #3a3a3a 100%);
            border-radius: 2px;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* ÁîµÊú∫Â§ñÂ£≥ */
        .motor {
            position: absolute;
            transform-style: preserve-3d;
        }

        .motor-body {
            position: absolute;
            background: radial-gradient(ellipse at 30% 30%, #6a6a6a 0%, #4a4a4a 50%, #2a2a2a 100%);
            border-radius: 6px;
            box-shadow:
                inset 3px 3px 6px rgba(255, 255, 255, 0.15),
                inset -3px -3px 6px rgba(0, 0, 0, 0.4),
                2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .motor-shaft {
            position: absolute;
            background: linear-gradient(90deg, #2a2a2a 0%, #4a4a4a 50%, #2a2a2a 100%);
            border-radius: 50%;
        }

        /* Èó®ÊåáÁ§∫ÁÅØ - Âä†Â§ßÁâà */
        .door-indicator {
            position: absolute;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff8080 0%, #ff4040 50%, #c0392b 100%);
            box-shadow:
                0 0 8px rgba(255, 64, 64, 0.8),
                0 0 16px rgba(192, 57, 43, 0.5),
                inset 0 -2px 4px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
        }

        .door-indicator.green {
            background: radial-gradient(circle at 30% 30%, #80ff80 0%, #40ff40 50%, #27ae60 100%);
            box-shadow:
                0 0 8px rgba(64, 255, 64, 0.8),
                0 0 16px rgba(39, 174, 96, 0.5),
                inset 0 -2px 4px rgba(0, 0, 0, 0.3);
        }

        /* LÂûãËßí‰ª∂ */
        .l-bracket {
            position: absolute;
            transform-style: preserve-3d;
        }

        .l-bracket-h {
            position: absolute;
            background: linear-gradient(180deg, #8a8a8a 0%, #6a6a6a 100%);
            border-radius: 2px;
        }

        .l-bracket-v {
            position: absolute;
            background: linear-gradient(90deg, #7a7a7a 0%, #6a6a6a 100%);
            border-radius: 2px;
        }
    </style>
</head>

<body>
    <div class="main-area">
        <div class="scene">
            <div class="elevator-world" id="elevatorWorld"></div>
        </div>
    </div>

    <!-- ÊéßÂà∂Èù¢Êùø -->
    <div class="control-panel">
        <div class="panel-section">
            <div class="panel-title">ËßÜËßíÂàáÊç¢</div>
            <div class="view-buttons">
                <button class="view-btn" data-view="front">Ê≠£Èù¢</button>
                <button class="view-btn" data-view="back">ËÉåÈù¢</button>
                <button class="view-btn" data-view="left">Â∑¶‰æß</button>
                <button class="view-btn" data-view="right">Âè≥‰æß</button>
                <button class="view-btn" data-view="top">‰øØËßÜ</button>
                <button class="view-btn active" data-view="3d">3DËßÜËßí</button>
            </div>
        </div>

        <div class="panel-section">
            <div class="panel-title">Ê•ºÂ±Ç</div>
            <div class="status-display">
                <div class="status-floor" id="statusFloor">1</div>
                <div class="status-text" id="statusText">IDLE</div>
            </div>
            <div class="floor-buttons">
                <button class="floor-btn active" data-floor="1">1</button>
                <button class="floor-btn" data-floor="2">2</button>
                <button class="floor-btn" data-floor="3">3</button>
                <button class="floor-btn" data-floor="4">4</button>
            </div>
        </div>

        <div class="panel-section">
            <div class="panel-title">ÊéßÂà∂</div>
            <div class="ctrl-buttons">
                <button class="ctrl-btn on" id="rotateBtn" title="Ëá™Âä®ÊóãËΩ¨">üîÑ</button>
                <button class="ctrl-btn" id="autoBtn" title="Ëá™Âä®ÊºîÁ§∫">‚ñ∂</button>
                <button class="ctrl-btn" id="audioBtn" title="Èü≥‰πê">üîä</button>
            </div>
        </div>
    </div>

    <a href="../index.html" style="position:fixed;left:16px;top:16px;color:rgba(255,255,255,0.7);text-decoration:none;font-size:0.9rem;z-index:1000;padding:6px 12px;border-radius:20px;background:rgba(255,255,255,0.1);backdrop-filter:blur(5px);transition:all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.2)';this.style.color='#fff'" onmouseout="this.style.background='rgba(255,255,255,0.1)';this.style.color='rgba(255,255,255,0.7)'">üè† È¶ñÈ°µ</a>
    <div class="hint">ÊãñÊãΩÊóãËΩ¨ËßÜËßí ¬∑ ÁÇπÂáªËßÜËßíÊåâÈíÆÂàáÊç¢ ¬∑ Êåâ 1-4 ÈÄâÊã©Ê•ºÂ±Ç</div>

    <audio id="audio" loop>
        <source src="download.m4a" type="audio/mp4">
    </audio>

    <script>
        const world = document.getElementById('elevatorWorld');

        // ===================== ÊûÑÂª∫ÂáΩÊï∞ =====================

        // ÂàõÂª∫TechnicÊ¢Å - Â¢ûÂº∫Áâà
        function createBeam(opts) {
            const {
                x = 0, y = 0, z = 0,
                w, h, d = 12,
                color = 'black',
                rotX = 0, rotY = 0, rotZ = 0,
                holes = false,
                holeDir = 'vertical',
                holeCount = 0,
                holeSize = 7,
                holeSpacing = 10,
                parent = world
            } = opts;

            const beam = document.createElement('div');
            beam.className = `technic-beam beam-${color}`;
            beam.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                width: ${w}px; height: ${h}px;
                --depth: ${d / 2}px;
                --w-half: ${w / 2}px;
                --h-half: ${h / 2}px;
                transform: translateZ(${z}px) rotateX(${rotX}deg) rotateY(${rotY}deg) rotateZ(${rotZ}deg);
            `;

            // ÂâçÂêéÈù¢
            const front = document.createElement('div');
            front.className = 'beam-face bf-front';
            front.style.cssText = `width: ${w}px; height: ${h}px;`;
            beam.appendChild(front);

            const back = document.createElement('div');
            back.className = 'beam-face bf-back';
            back.style.cssText = `width: ${w}px; height: ${h}px;`;
            beam.appendChild(back);

            // Â∑¶Âè≥Èù¢
            const left = document.createElement('div');
            left.className = 'beam-face bf-left';
            left.style.cssText = `width: ${d}px; height: ${h}px;`;
            beam.appendChild(left);

            const right = document.createElement('div');
            right.className = 'beam-face bf-right';
            right.style.cssText = `width: ${d}px; height: ${h}px;`;
            beam.appendChild(right);

            // ‰∏ä‰∏ãÈù¢
            const top = document.createElement('div');
            top.className = 'beam-face bf-top';
            top.style.cssText = `width: ${w}px; height: ${d}px;`;
            beam.appendChild(top);

            const bottom = document.createElement('div');
            bottom.className = 'beam-face bf-bottom';
            bottom.style.cssText = `width: ${w}px; height: ${d}px;`;
            beam.appendChild(bottom);

            // Ê∑ªÂä†ÂúÜÂ≠î
            if (holes && holeCount > 0) {
                const holesContainer = document.createElement('div');
                holesContainer.className = 'holes-container';
                holesContainer.style.setProperty('--depth', `${d / 2 + 1}px`);

                for (let i = 0; i < holeCount; i++) {
                    const hole = document.createElement('div');
                    hole.className = 'technic-hole';

                    if (holeDir === 'vertical') {
                        const startY = (h - (holeCount - 1) * holeSpacing) / 2 - holeSize / 2;
                        hole.style.cssText = `
                            width: ${holeSize}px; height: ${holeSize}px;
                            left: ${w / 2 - holeSize / 2}px;
                            top: ${startY + i * holeSpacing}px;
                        `;
                    } else {
                        const startX = (w - (holeCount - 1) * holeSpacing) / 2 - holeSize / 2;
                        hole.style.cssText = `
                            width: ${holeSize}px; height: ${holeSize}px;
                            top: ${h / 2 - holeSize / 2}px;
                            left: ${startX + i * holeSpacing}px;
                        `;
                    }
                    holesContainer.appendChild(hole);
                }
                beam.appendChild(holesContainer);
            }

            parent.appendChild(beam);
            return beam;
        }

        // ÂàõÂª∫ËøûÊé•ÈîÄ
        function createPin(opts) {
            const {
                x = 0, y = 0, z = 0,
                size = 7,
                color = 'black',
                parent = world
            } = opts;

            const pin = document.createElement('div');
            pin.className = `pin pin-${color}`;
            pin.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                width: ${size}px; height: ${size}px;
                transform: translateZ(${z}px);
            `;

            const body = document.createElement('div');
            body.className = 'pin-body';
            pin.appendChild(body);

            parent.appendChild(pin);
            return pin;
        }

        // ÂàõÂª∫ÈΩøËΩÆ - Â¢ûÂº∫Áâà
        function createGear(opts) {
            const {
                x = 0, y = 0, z = 0,
                size = 50,
                teeth = 16,
                id = '',
                spokes = 4,
                parent = world
            } = opts;

            const gear = document.createElement('div');
            gear.className = 'gear';
            if (id) gear.id = id;
            gear.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                width: ${size}px; height: ${size}px;
                transform: translateZ(${z}px);
            `;

            const body = document.createElement('div');
            body.className = 'gear-body';

            // ÈΩøËΩÆÁõòÈù¢
            const discFront = document.createElement('div');
            discFront.className = 'gear-disc gear-disc-front';
            body.appendChild(discFront);

            const discBack = document.createElement('div');
            discBack.className = 'gear-disc gear-disc-back';
            body.appendChild(discBack);

            // ÈΩøËΩÆÈΩø
            const radius = size / 2 + 4;
            for (let i = 0; i < teeth; i++) {
                const tooth = document.createElement('div');
                tooth.className = 'gear-tooth';
                tooth.style.transformOrigin = `center ${radius}px`;
                tooth.style.transform = `rotate(${i * (360 / teeth)}deg)`;
                body.appendChild(tooth);
            }

            // ËæêÊù°
            const spokeLength = size * 0.35;
            for (let i = 0; i < spokes; i++) {
                const spoke = document.createElement('div');
                spoke.className = 'gear-spoke';
                spoke.style.width = `${spokeLength}px`;
                spoke.style.transform = `translate(-50%, -50%) rotate(${i * (360 / spokes)}deg) translateX(${size * 0.15}px) translateZ(7px)`;
                body.appendChild(spoke);
            }

            gear.appendChild(body);

            // ‰∏≠ÂøÉÂ≠î
            const center = document.createElement('div');
            center.className = 'gear-center';
            center.style.cssText = `width: ${size * 0.22}px; height: ${size * 0.22}px;`;
            gear.appendChild(center);

            // ÂçÅÂ≠óËΩ¥Â≠î
            const cross = document.createElement('div');
            cross.className = 'gear-cross';
            cross.style.cssText = `width: ${size * 0.15}px; height: ${size * 0.15}px;`;
            gear.appendChild(cross);

            parent.appendChild(gear);
            return gear;
        }

        // ÂàõÂª∫ÊªëËΩÆ
        function createPulley(opts) {
            const {
                x = 0, y = 0, z = 0,
                size = 32,
                parent = world
            } = opts;

            const pulley = document.createElement('div');
            pulley.className = 'pulley';
            pulley.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                width: ${size}px; height: ${size}px;
                transform: translateZ(${z}px);
            `;

            pulley.innerHTML = `
                <div class="pulley-disc pulley-front"></div>
                <div class="pulley-disc pulley-back"></div>
                <div class="pulley-groove" style="width: ${size * 0.7}px; height: ${size * 0.7}px;"></div>
                <div class="pulley-center" style="width: ${size * 0.22}px; height: ${size * 0.22}px;"></div>
            `;

            parent.appendChild(pulley);
            return pulley;
        }

        // ÂàõÂª∫ÂºπÁ∞ß
        function createSpring(opts) {
            const {
                x = 0, y = 0, z = 0,
                w = 22, h = 45,
                parent = world
            } = opts;

            const spring = document.createElement('div');
            spring.className = 'spring-buffer';
            spring.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                width: ${w}px; height: ${h}px;
                transform: translateZ(${z}px);
            `;

            spring.innerHTML = `
                <div class="spring-coil"></div>
                <div class="spring-cap spring-top"></div>
                <div class="spring-cap spring-bottom"></div>
            `;

            parent.appendChild(spring);
            return spring;
        }

        // ÂàõÂª∫ÈìæÊù°ÂØºËΩ®
        function createChainGuide(opts) {
            const {
                x = 0, y = 0, z = 0,
                height = 100,
                parent = world
            } = opts;

            const chain = document.createElement('div');
            chain.className = 'chain-guide';
            chain.style.cssText = `
                left: ${x}px; top: ${y}px;
                height: ${height}px;
                transform: translateZ(${z}px);
            `;

            parent.appendChild(chain);
            return chain;
        }

        // ÂàõÂª∫ÁîµÊú∫
        function createMotor(opts) {
            const {
                x = 0, y = 0, z = 0,
                w = 45, h = 35,
                parent = world
            } = opts;

            const motor = document.createElement('div');
            motor.className = 'motor';
            motor.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                width: ${w}px; height: ${h}px;
                transform: translateZ(${z}px);
            `;

            motor.innerHTML = `
                <div class="motor-body" style="width: ${w}px; height: ${h}px; transform: translateZ(10px);"></div>
                <div class="motor-body" style="width: ${w}px; height: ${h}px; transform: translateZ(-10px);"></div>
                <div class="motor-shaft" style="width: 10px; height: 10px; top: ${h / 2 - 5}px; right: -15px; transform: translateZ(0);"></div>
            `;

            parent.appendChild(motor);
            return motor;
        }

        // ÂàõÂª∫ËΩ¥
        function createAxle(opts) {
            const {
                x = 0, y = 0, z = 0,
                length = 50,
                thickness = 5,
                color = 'black',
                rotX = 0, rotY = 0, rotZ = 0,
                parent = world
            } = opts;

            const axle = document.createElement('div');
            axle.className = 'axle';
            axle.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                width: ${length}px; height: ${thickness}px;
                transform: translateZ(${z}px) rotateX(${rotX}deg) rotateY(${rotY}deg) rotateZ(${rotZ}deg);
            `;

            const body = document.createElement('div');
            body.className = `axle-body ${color === 'yellow' ? 'yellow' : ''}`;
            axle.appendChild(body);

            parent.appendChild(axle);
            return axle;
        }

        // ÂàõÂª∫LÂûãËßí‰ª∂
        function createLBracket(opts) {
            const {
                x = 0, y = 0, z = 0,
                hLen = 30, vLen = 20, thickness = 8,
                parent = world
            } = opts;

            const bracket = document.createElement('div');
            bracket.className = 'l-bracket';
            bracket.style.cssText = `
                left: ${x}px; bottom: ${y}px;
                transform: translateZ(${z}px);
            `;

            bracket.innerHTML = `
                <div class="l-bracket-h" style="width: ${hLen}px; height: ${thickness}px; bottom: 0;"></div>
                <div class="l-bracket-v" style="width: ${thickness}px; height: ${vLen}px; left: 0;"></div>
            `;

            parent.appendChild(bracket);
            return bracket;
        }

        // ===================== ÊûÑÂª∫ÁîµÊ¢ØÁªìÊûÑ =====================

        const FRAME_W = 320;
        const FRAME_D = 200;
        const FRAME_H = 750;
        const FLOOR_H = 160;
        const CAR_W = 150;
        const CAR_H = 120;
        const CAR_D = 60;

        // ========== Â∫ïÂ∫ß ==========
        const basePlate = document.createElement('div');
        basePlate.className = 'base-plate';
        basePlate.style.cssText = `
            left: 50%; margin-left: -${FRAME_W / 2 + 25}px;
            width: ${FRAME_W + 50}px; height: 35px;
            bottom: 0;
        `;

        const baseTop = document.createElement('div');
        baseTop.className = 'base-top-face';
        baseTop.style.cssText = `
            width: ${FRAME_W + 50}px; height: ${FRAME_D + 50}px;
            transform: rotateX(90deg) translateZ(18px);
        `;

        // Â∫ïÂ∫ßÂúÜÈíâ - Êõ¥Â§öÊõ¥ÁúüÂÆû
        const studPositions = [];
        for (let sx = 25; sx <= FRAME_W + 25; sx += 40) {
            for (let sy = 25; sy <= FRAME_D + 25; sy += 40) {
                studPositions.push([sx, sy, (sx + sy) % 80 === 0]);
            }
        }
        studPositions.forEach(([sx, sy, isBlue]) => {
            const stud = document.createElement('div');
            stud.className = `base-stud ${isBlue ? 'base-stud-blue' : ''}`;
            stud.style.cssText = `left: ${sx - 10}px; top: ${sy - 10}px;`;
            baseTop.appendChild(stud);
        });

        basePlate.appendChild(baseTop);
        world.appendChild(basePlate);

        // ========== ‰∏ªÊ°ÜÊû∂Á´ãÊü± - 4Ê†πÈªëËâ≤ ==========
        const pillarPositions = [
            { x: 55, z: 90 },   // ÂâçÂ∑¶
            { x: FRAME_W - 55, z: 90 },  // ÂâçÂè≥
            { x: 55, z: -90 },  // ÂêéÂ∑¶
            { x: FRAME_W - 55, z: -90 }  // ÂêéÂè≥
        ];

        pillarPositions.forEach((p) => {
            createBeam({
                x: p.x - 7, y: 40, z: p.z,
                w: 14, h: FRAME_H - 50, d: 14,
                color: 'black',
                holes: true, holeDir: 'vertical',
                holeCount: Math.floor((FRAME_H - 50) / 12),
                holeSpacing: 12
            });
        });

        // ========== ÂâçÈù¢Ê©ôËâ≤Á´ãÊü± ==========
        createBeam({
            x: 30, y: 40, z: 95,
            w: 14, h: FRAME_H - 80, d: 14,
            color: 'orange',
            holes: true, holeDir: 'vertical',
            holeCount: Math.floor((FRAME_H - 80) / 12),
            holeSpacing: 12
        });

        createBeam({
            x: FRAME_W - 44, y: 40, z: 95,
            w: 14, h: FRAME_H - 80, d: 14,
            color: 'orange',
            holes: true, holeDir: 'vertical',
            holeCount: Math.floor((FRAME_H - 80) / 12),
            holeSpacing: 12
        });

        // ========== Â∫ïÈÉ®Ê®™Ê¢Å ==========
        // ÂâçÊ®™Ê¢Å
        createBeam({
            x: 65, y: 45, z: 90,
            w: FRAME_W - 130, h: 14, d: 14,
            color: 'dgray',
            holes: true, holeDir: 'horizontal',
            holeCount: Math.floor((FRAME_W - 130) / 12),
            holeSpacing: 12
        });

        // ÂêéÊ®™Ê¢Å
        createBeam({
            x: 65, y: 45, z: -90,
            w: FRAME_W - 130, h: 14, d: 14,
            color: 'dgray',
            holes: true, holeDir: 'horizontal',
            holeCount: Math.floor((FRAME_W - 130) / 12),
            holeSpacing: 12
        });

        // ‰æßÊ¢Å
        createBeam({
            x: 52, y: 45, z: 0,
            w: 14, h: 180, d: 14,
            color: 'dgray',
            rotY: 90,
            holes: true, holeDir: 'vertical',
            holeCount: 15,
            holeSpacing: 12
        });

        createBeam({
            x: FRAME_W - 66, y: 45, z: 0,
            w: 14, h: 180, d: 14,
            color: 'dgray',
            rotY: 90,
            holes: true, holeDir: 'vertical',
            holeCount: 15,
            holeSpacing: 12
        });

        // ========== ÊØèÂ±ÇÊ®™Ê¢ÅÂíåÈó®Ê°Ü ==========
        for (let floor = 1; floor <= 4; floor++) {
            const baseY = 40 + floor * FLOOR_H;

            // ÂâçÊ®™Ê¢Å - ÊµÖÁÅ∞
            createBeam({
                x: 65, y: baseY, z: 90,
                w: FRAME_W - 130, h: 12, d: 12,
                color: 'lgray',
                holes: true, holeDir: 'horizontal',
                holeCount: Math.floor((FRAME_W - 130) / 12),
                holeSpacing: 12
            });

            // ÂêéÊ®™Ê¢Å - ÊµÖÁÅ∞
            createBeam({
                x: 65, y: baseY, z: -90,
                w: FRAME_W - 130, h: 12, d: 12,
                color: 'lgray',
                holes: true, holeDir: 'horizontal',
                holeCount: Math.floor((FRAME_W - 130) / 12),
                holeSpacing: 12
            });

            // ‰æßÈù¢Áü≠Ê¢Å
            createBeam({
                x: 52, y: baseY, z: 0,
                w: 12, h: 180, d: 12,
                color: 'lgray',
                rotY: 90
            });

            createBeam({
                x: FRAME_W - 64, y: baseY, z: 0,
                w: 12, h: 180, d: 12,
                color: 'lgray',
                rotY: 90
            });

            // ========== Ê•ºÂ±ÇÈó®Ê°Ü - ÁôΩËâ≤TechnicÊ¢Å ==========
            const fy = 40 + (floor - 1) * FLOOR_H + 18;

            // Â∑¶Èó®Ê°Ü
            createBeam({
                x: 70, y: fy, z: 98,
                w: 12, h: CAR_H + 25, d: 8,
                color: 'white',
                holes: true, holeDir: 'vertical',
                holeCount: Math.floor((CAR_H + 25) / 10),
                holeSize: 6,
                holeSpacing: 10
            });

            // Âè≥Èó®Ê°Ü
            createBeam({
                x: FRAME_W - 82, y: fy, z: 98,
                w: 12, h: CAR_H + 25, d: 8,
                color: 'white',
                holes: true, holeDir: 'vertical',
                holeCount: Math.floor((CAR_H + 25) / 10),
                holeSize: 6,
                holeSpacing: 10
            });

            // ‰∏äÈó®Ê°Ü
            createBeam({
                x: 70, y: fy + CAR_H + 15, z: 98,
                w: FRAME_W - 140, h: 12, d: 8,
                color: 'white',
                holes: true, holeDir: 'horizontal',
                holeCount: Math.floor((FRAME_W - 140) / 10),
                holeSize: 6,
                holeSpacing: 10
            });

            // ‰∏ãÈó®Ê°Ü
            createBeam({
                x: 70, y: fy, z: 98,
                w: FRAME_W - 140, h: 10, d: 8,
                color: 'white'
            });
        }

        // ========== ÊñúÊíë ==========
        for (let i = 0; i < 4; i++) {
            const by = 60 + i * FLOOR_H;

            // ÂâçÈù¢ÊñúÊíë
            createBeam({
                x: 60, y: by, z: 92,
                w: 12, h: 110, d: 12,
                color: 'dgray',
                rotZ: 32
            });

            createBeam({
                x: FRAME_W - 95, y: by, z: 92,
                w: 12, h: 110, d: 12,
                color: 'dgray',
                rotZ: -32
            });

            // ÂêéÈù¢ÊñúÊíë
            createBeam({
                x: 60, y: by, z: -92,
                w: 12, h: 110, d: 12,
                color: 'dgray',
                rotZ: 32
            });

            createBeam({
                x: FRAME_W - 95, y: by, z: -92,
                w: 12, h: 110, d: 12,
                color: 'dgray',
                rotZ: -32
            });
        }

        // ‰æßÈù¢ÊñúÊíë
        for (let i = 0; i < 4; i++) {
            const by = 60 + i * FLOOR_H;
            createBeam({
                x: 52, y: by, z: 45,
                w: 12, h: 110, d: 12,
                color: 'dgray',
                rotY: 90,
                rotZ: 28
            });

            createBeam({
                x: 52, y: by, z: -45,
                w: 12, h: 110, d: 12,
                color: 'dgray',
                rotY: 90,
                rotZ: 28
            });
        }

        // ========== ÈªÑËâ≤ÂÆâÂÖ®Ê†èÊùÜ ==========
        for (let floor = 1; floor <= 4; floor++) {
            const hy = 40 + (floor - 1) * FLOOR_H + 25;

            // Â∑¶‰æßÊ†èÊùÜ
            createBeam({
                x: 22, y: hy, z: 100,
                w: 10, h: 55, d: 10,
                color: 'yellow'
            });
            createBeam({
                x: 22, y: hy + 55, z: 100,
                w: 40, h: 10, d: 10,
                color: 'yellow'
            });
            createBeam({
                x: 52, y: hy + 20, z: 100,
                w: 10, h: 45, d: 10,
                color: 'yellow'
            });

            // Âè≥‰æßÊ†èÊùÜ
            createBeam({
                x: FRAME_W - 32, y: hy, z: 100,
                w: 10, h: 55, d: 10,
                color: 'yellow'
            });
            createBeam({
                x: FRAME_W - 62, y: hy + 55, z: 100,
                w: 40, h: 10, d: 10,
                color: 'yellow'
            });
            createBeam({
                x: FRAME_W - 62, y: hy + 20, z: 100,
                w: 10, h: 45, d: 10,
                color: 'yellow'
            });
        }

        // ========== È°∂ÈÉ®Êú∫Ê¢∞ÂÆ§ - Â§ßÂπÖÂ¢ûÂº∫ ==========
        const topY = FRAME_H;

        // È°∂ÈÉ®‰∏ªÊ°ÜÊû∂Ê¢Å - ÊµÖÁÅ∞Ëâ≤
        createBeam({
            x: 45, y: topY, z: 100,
            w: FRAME_W - 90, h: 16, d: 16,
            color: 'lgray',
            holes: true, holeDir: 'horizontal',
            holeCount: Math.floor((FRAME_W - 90) / 12),
            holeSpacing: 12
        });

        createBeam({
            x: 45, y: topY, z: -100,
            w: FRAME_W - 90, h: 16, d: 16,
            color: 'lgray',
            holes: true, holeDir: 'horizontal',
            holeCount: Math.floor((FRAME_W - 90) / 12),
            holeSpacing: 12
        });

        createBeam({
            x: 38, y: topY, z: 0,
            w: 16, h: 200, d: 16,
            color: 'lgray',
            rotY: 90
        });

        createBeam({
            x: FRAME_W - 54, y: topY, z: 0,
            w: 16, h: 200, d: 16,
            color: 'lgray',
            rotY: 90
        });

        // È°∂ÈÉ®ÂûÇÁõ¥ÊîØÊíë
        createBeam({
            x: 50, y: topY, z: 95,
            w: 12, h: 70, d: 12,
            color: 'lgray',
            holes: true, holeDir: 'vertical',
            holeCount: 6,
            holeSpacing: 10
        });

        createBeam({
            x: FRAME_W - 62, y: topY, z: 95,
            w: 12, h: 70, d: 12,
            color: 'lgray',
            holes: true, holeDir: 'vertical',
            holeCount: 6,
            holeSpacing: 10
        });

        createBeam({
            x: 50, y: topY, z: -95,
            w: 12, h: 70, d: 12,
            color: 'lgray',
            holes: true, holeDir: 'vertical',
            holeCount: 6,
            holeSpacing: 10
        });

        createBeam({
            x: FRAME_W - 62, y: topY, z: -95,
            w: 12, h: 70, d: 12,
            color: 'lgray',
            holes: true, holeDir: 'vertical',
            holeCount: 6,
            holeSpacing: 10
        });

        // È°∂ÈÉ®Ê®™ÂêëÂä†Âº∫Ê¢Å
        createBeam({
            x: 55, y: topY + 60, z: 95,
            w: FRAME_W - 110, h: 14, d: 14,
            color: 'lgray',
            holes: true, holeDir: 'horizontal',
            holeCount: Math.floor((FRAME_W - 110) / 12),
            holeSpacing: 12
        });

        createBeam({
            x: 55, y: topY + 60, z: -95,
            w: FRAME_W - 110, h: 14, d: 14,
            color: 'lgray',
            holes: true, holeDir: 'horizontal',
            holeCount: Math.floor((FRAME_W - 110) / 12),
            holeSpacing: 12
        });

        // È°∂ÈÉ®‰æßÈù¢Ê¢Å
        createBeam({
            x: 45, y: topY + 60, z: 0,
            w: 14, h: 190, d: 14,
            color: 'lgray',
            rotY: 90
        });

        createBeam({
            x: FRAME_W - 59, y: topY + 60, z: 0,
            w: 14, h: 190, d: 14,
            color: 'lgray',
            rotY: 90
        });

        // È°∂ÈÉ®‰∏≠Â§ÆÊ®™Ê¢Å
        createBeam({
            x: FRAME_W / 2 - 60, y: topY + 35, z: 100,
            w: 120, h: 12, d: 12,
            color: 'lgray',
            holes: true, holeDir: 'horizontal',
            holeCount: 10,
            holeSpacing: 12
        });

        // ========== Â§ßÈΩøËΩÆ - ÈªÑËâ≤ ==========
        const gear1 = createGear({
            x: 100, y: topY + 25, z: 105,
            size: 65, teeth: 24, id: 'gear1', spokes: 6
        });

        const gear2 = createGear({
            x: FRAME_W - 165, y: topY + 25, z: 105,
            size: 65, teeth: 24, id: 'gear2', spokes: 6
        });

        const gear3 = createGear({
            x: FRAME_W / 2 - 25, y: topY + 32, z: 105,
            size: 45, teeth: 16, id: 'gear3', spokes: 4
        });

        // È°∂ÈÉ®Â∞èÈΩøËΩÆ
        createGear({
            x: 155, y: topY + 35, z: 105,
            size: 35, teeth: 12, spokes: 3
        });

        createGear({
            x: FRAME_W - 190, y: topY + 35, z: 105,
            size: 35, teeth: 12, spokes: 3
        });

        // ========== ÊªëËΩÆÁªÑ - ‰ªøÁúü‰πêÈ´òÊú∫Ê¢∞ÁªìÊûÑ ==========

        // ÊúÄ‰∏äÂ±ÇÂ∞èÊªëËΩÆÁªÑ (4‰∏™) - ÂØºÂêëÊªëËΩÆÔºå‰Ωç‰∫éÈ°∂Ê¢Å‰∏ãÊñπ
        createPulley({ x: 120, y: topY + 78, z: 30, size: 26 });
        createPulley({ x: 155, y: topY + 78, z: 30, size: 26 });
        createPulley({ x: FRAME_W - 155, y: topY + 78, z: 30, size: 26 });
        createPulley({ x: FRAME_W - 120, y: topY + 78, z: 30, size: 26 });

        // ‰∏≠Â±ÇÂ§ßÊªëËΩÆÁªÑ (4‰∏™) - ‰∏ªÂØºÂêëÊªëËΩÆ
        createPulley({ x: 115, y: topY + 60, z: 45, size: 38 });
        createPulley({ x: 170, y: topY + 60, z: 45, size: 38 });
        createPulley({ x: FRAME_W - 170, y: topY + 60, z: 45, size: 38 });
        createPulley({ x: FRAME_W - 115, y: topY + 60, z: 45, size: 38 });

        // ‰∏ãÂ±ÇÊªëËΩÆÁªÑ (4‰∏™) - ÁºÜÁª≥Âá∫Âè£ÊªëËΩÆ
        createPulley({ x: 115, y: topY + 45, z: 55, size: 38 });
        createPulley({ x: FRAME_W - 153, y: topY + 45, z: 55, size: 38 });
        createPulley({ x: 115, y: topY + 45, z: -55, size: 38 });
        createPulley({ x: FRAME_W - 153, y: topY + 45, z: -55, size: 38 });

        // ‰∏≠Â§ÆÈÖçÈáçÁºÜÁª≥ÊªëËΩÆ
        createPulley({ x: FRAME_W / 2 - 16, y: topY + 50, z: 40, size: 32 });
        createPulley({ x: FRAME_W / 2 - 16, y: topY + 50, z: -40, size: 32 });

        // ÂêéÊñπÈÖçÈáçÂØºÂêëÊªëËΩÆ
        createPulley({ x: FRAME_W / 2 - 10, y: topY + 70, z: -70, size: 30 });
        createPulley({ x: FRAME_W / 2 + 10, y: topY + 70, z: -70, size: 30 });

        // ========== ÈìæÊù°ÂØºËΩ® - È°∂ÈÉ®ÂûÇÁõ¥ÈìæÊù° ==========
        // Ââç‰æßÈìæÊù°ÂØºËΩ®
        createChainGuide({ x: 137, y: 45, z: 35, height: 65 });
        createChainGuide({ x: 167, y: 45, z: 35, height: 65 });
        createChainGuide({ x: FRAME_W - 167, y: 45, z: 35, height: 65 });
        createChainGuide({ x: FRAME_W - 137, y: 45, z: 35, height: 65 });

        // Âêé‰æßÈìæÊù°ÂØºËΩ®
        createChainGuide({ x: FRAME_W / 2 - 15, y: 35, z: -60, height: 55 });
        createChainGuide({ x: FRAME_W / 2 + 15, y: 35, z: -60, height: 55 });

        // ========== ÁîµÊú∫ ==========
        createMotor({ x: FRAME_W / 2 - 25, y: topY + 18, z: 0, w: 50, h: 40 });

        // ========== ËΩ¥ ==========
        createAxle({ x: 125, y: topY + 53, z: 105, length: 30, thickness: 6, rotY: 90 });
        createAxle({ x: FRAME_W - 155, y: topY + 53, z: 105, length: 30, thickness: 6, rotY: 90 });
        createAxle({ x: 130, y: topY + 53, z: 55, length: 100, thickness: 7, color: 'yellow', rotY: 90 });
        createAxle({ x: FRAME_W - 160, y: topY + 53, z: 55, length: 100, thickness: 7, color: 'yellow', rotY: 90 });

        // ========== Ë≠¶ÂëäÊ†áÂøó ==========
        const warning = document.createElement('div');
        warning.className = 'warning-sign';
        warning.style.cssText = `left: ${FRAME_W / 2 - 22}px; bottom: ${topY - 45}px; transform: translateZ(102px);`;
        warning.innerHTML = `
            <div class="warning-body">
                <div class="warning-icon">‚ö†</div>
            </div>
            <div class="warning-text">ÂΩìÂøÉÊú∫Ê¢∞‰º§‰∫∫</div>
        `;
        world.appendChild(warning);

        // ========== Á∫¢Ëâ≤ÂºπÁ∞ßÁºìÂÜ≤Âô® ==========
        const SPRING_MAX_H = 50;  // ÂºπÁ∞ßÊúÄÂ§ßÈ´òÂ∫¶
        const SPRING_MIN_H = 20;  // ÂºπÁ∞ßÂéãÁº©ÂêéÊúÄÂ∞èÈ´òÂ∫¶
        const springs = [
            createSpring({ x: 120, y: 42, z: 55, w: 24, h: SPRING_MAX_H }),
            createSpring({ x: FRAME_W - 144, y: 42, z: 55, w: 24, h: SPRING_MAX_H }),
            createSpring({ x: 120, y: 42, z: -55, w: 24, h: SPRING_MAX_H }),
            createSpring({ x: FRAME_W - 144, y: 42, z: -55, w: 24, h: SPRING_MAX_H })
        ];

        // ========== Ê•ºÂ±ÇÊ†áËØÜ ==========
        for (let floor = 1; floor <= 4; floor++) {
            const marker = document.createElement('div');
            marker.className = 'floor-marker';
            marker.style.cssText = `left: 8px; bottom: ${40 + (floor - 1) * FLOOR_H + 65}px; transform: translateZ(108px);`;
            marker.textContent = floor;
            world.appendChild(marker);
        }

        // ========== Èó®ÊåáÁ§∫ÁÅØ ==========
        for (let floor = 1; floor <= 4; floor++) {
            const iy = 40 + (floor - 1) * FLOOR_H + CAR_H + 38;
            const indicator = document.createElement('div');
            indicator.className = 'door-indicator';
            indicator.id = `indicator${floor}`;
            indicator.style.cssText = `left: ${FRAME_W / 2 - 7}px; bottom: ${iy}px; transform: translateZ(105px);`;
            world.appendChild(indicator);
        }

        // ========== Èí¢ÁºÜ ==========
        const cablePositions = [
            { x: 130, z: 40 },
            { x: 175, z: 40 },
            { x: 130, z: -40 },
            { x: 175, z: -40 }
        ];

        const cables = cablePositions.map((pos, i) => {
            const cable = document.createElement('div');
            cable.className = 'cable cable-textured';
            cable.id = `cable${i + 1}`;
            cable.style.cssText = `left: ${pos.x}px; top: 80px; transform: translateZ(${pos.z}px);`;
            world.appendChild(cable);
            return cable;
        });

        // ========== ÈÖçÈáçÁºÜÁª≥ ==========
        const cwCablePositions = [
            { x: FRAME_W / 2 - 12, z: -75 },  // ÈÖçÈáçÂ∑¶‰æß
            { x: FRAME_W / 2 + 12, z: -75 }   // ÈÖçÈáçÂè≥‰æß
        ];

        const cwCables = cwCablePositions.map((pos, i) => {
            const cable = document.createElement('div');
            cable.className = 'cable cable-counterweight';
            cable.id = `cwCable${i + 1}`;
            cable.style.cssText = `left: ${pos.x}px; top: 80px; transform: translateZ(${pos.z}px);`;
            world.appendChild(cable);
            return cable;
        });

        // ========== ÈÖçÈáçÂùóÔºàÊ°ÜÊû∂ÂÜÖÈÉ®ÂêéÊñπÔºâ ==========
        const counterweight = document.createElement('div');
        counterweight.className = 'counterweight';
        counterweight.id = 'counterweight';
        counterweight.style.cssText = `left: ${FRAME_W / 2 - 18}px; width: 36px; height: 110px; transform: translateZ(-75px);`;
        counterweight.innerHTML = `
            <div class="cw-panel cw-front"><div class="cw-weights"></div></div>
            <div class="cw-panel cw-back"></div>
            <div class="cw-panel cw-side cw-left"></div>
            <div class="cw-panel cw-side cw-right"></div>
        `;
        world.appendChild(counterweight);

        // ÈÖçÈáçÂØºËΩ®
        const cwRail1 = document.createElement('div');
        cwRail1.className = 'cw-rail';
        cwRail1.style.cssText = `left: ${FRAME_W / 2 - 28}px; bottom: 45px; width: 8px; height: ${FRAME_H - 90}px; transform: translateZ(-65px);`;
        world.appendChild(cwRail1);

        const cwRail2 = document.createElement('div');
        cwRail2.className = 'cw-rail';
        cwRail2.style.cssText = `left: ${FRAME_W / 2 + 20}px; bottom: 45px; width: 8px; height: ${FRAME_H - 90}px; transform: translateZ(-65px);`;
        world.appendChild(cwRail2);

        // ========== ÁîµÊ¢ØËΩøÂé¢ÔºàÊ°ÜÊû∂ÂÜÖÈÉ®‰∏≠Â§ÆÔºâ ==========
        const elevatorCar = document.createElement('div');
        elevatorCar.className = 'elevator-car';
        elevatorCar.id = 'elevatorCar';
        // Ê°ÜÊû∂‰∏≠ÂøÉ‰ΩçÁΩÆÔºö(45 + FRAME_W - 55) / 2 = (FRAME_W - 10) / 2
        const frameCenter = (FRAME_W - 10) / 2;
        elevatorCar.style.cssText = `
            left: ${frameCenter}px;
            margin-left: -${CAR_W / 2}px;
            width: ${CAR_W}px; height: ${CAR_H}px;
            --car-width: ${CAR_W}px;
            --car-height: ${CAR_H}px;
            --car-depth: ${CAR_D}px;
            transform: translateZ(-10px);
        `;

        const carFrame = document.createElement('div');
        carFrame.className = 'car-frame';

        // ËΩøÂé¢Èù¢Êùø
        const carFront = document.createElement('div');
        carFront.className = 'car-front-panel';
        carFront.innerHTML = `
            <div class="door-frame">
                <div class="door-inner">
                    <div class="door-panel door-left" id="doorLeft">
                        <div class="door-lines"></div>
                    </div>
                    <div class="door-panel door-right" id="doorRight">
                        <div class="door-lines"></div>
                    </div>
                </div>
            </div>
            <div class="kone-label">Giant KONE</div>
        `;
        carFrame.appendChild(carFront);

        const carBack = document.createElement('div');
        carBack.className = 'car-back-panel';
        carFrame.appendChild(carBack);

        const carLeft = document.createElement('div');
        carLeft.className = 'car-side-panel car-side-left';
        carFrame.appendChild(carLeft);

        const carRight = document.createElement('div');
        carRight.className = 'car-side-panel car-side-right';
        carFrame.appendChild(carRight);

        const carTop = document.createElement('div');
        carTop.className = 'car-top-panel';
        carFrame.appendChild(carTop);

        const carBottom = document.createElement('div');
        carBottom.className = 'car-bottom-panel';
        carFrame.appendChild(carBottom);

        elevatorCar.appendChild(carFrame);

        // ËΩøÂé¢TechnicËæπÊ°ÜÊ¢Å
        createBeam({ x: -8, y: -8, z: CAR_D + 8, w: 10, h: CAR_H + 16, d: 10, color: 'white', parent: elevatorCar });
        createBeam({ x: CAR_W - 2, y: -8, z: CAR_D + 8, w: 10, h: CAR_H + 16, d: 10, color: 'white', parent: elevatorCar });
        createBeam({ x: -8, y: CAR_H - 2, z: CAR_D + 8, w: CAR_W + 16, h: 10, d: 10, color: 'white', parent: elevatorCar });
        createBeam({ x: -8, y: -8, z: CAR_D + 8, w: CAR_W + 16, h: 10, d: 10, color: 'white', parent: elevatorCar });

        // ËΩøÂé¢È°∂ÈÉ®Èí¢ÁºÜËøûÊé•Ê¢Å
        createBeam({ x: 15, y: CAR_H + 8, z: 0, w: CAR_W - 30, h: 10, d: 10, color: 'lgray', parent: elevatorCar });

        // ËΩøÂé¢Â∫ïÈÉ®Âä†Âº∫Ê¢Å
        createBeam({ x: 15, y: -15, z: 35, w: CAR_W - 30, h: 10, d: 10, color: 'lgray', parent: elevatorCar });
        createBeam({ x: 15, y: -15, z: -35, w: CAR_W - 30, h: 10, d: 10, color: 'lgray', parent: elevatorCar });

        // Èí¢ÁºÜËøûÊé•ÈîÄ
        createPin({ x: 40, y: CAR_H + 12, z: 40, size: 10, color: 'gray', parent: elevatorCar });
        createPin({ x: 40, y: CAR_H + 12, z: -40, size: 10, color: 'gray', parent: elevatorCar });
        createPin({ x: CAR_W - 50, y: CAR_H + 12, z: 40, size: 10, color: 'gray', parent: elevatorCar });
        createPin({ x: CAR_W - 50, y: CAR_H + 12, z: -40, size: 10, color: 'gray', parent: elevatorCar });

        world.appendChild(elevatorCar);

        // ========== ËøûÊé•ÈîÄ - Êõ¥Â§öÁªÜËäÇ ==========
        // Á´ãÊü±ËøûÊé•ÈîÄ
        for (let i = 0; i < 55; i += 4) {
            const pinY = 50 + i * 12;
            if (pinY < FRAME_H - 60) {
                const colors = ['blue', 'black', 'tan', 'black'];
                const c = colors[i % 4];
                createPin({ x: 56, y: pinY, z: 97, size: 6, color: c });
                createPin({ x: FRAME_W - 62, y: pinY, z: 97, size: 6, color: c });
            }
        }

        // Ê©ôËâ≤Ê¢ÅËøûÊé•ÈîÄ
        for (let i = 0; i < 50; i += 5) {
            const pinY = 50 + i * 12;
            if (pinY < FRAME_H - 80) {
                createPin({ x: 36, y: pinY, z: 102, size: 6, color: 'yellow' });
                createPin({ x: FRAME_W - 42, y: pinY, z: 102, size: 6, color: 'yellow' });
            }
        }

        // È°∂ÈÉ®ËøûÊé•ÈîÄ
        for (let i = 0; i < 7; i++) {
            createPin({ x: 60 + i * 32, y: topY + 8, z: 103, size: 7, color: 'gray' });
        }

        // ========== Êõ¥Â§ö‰æßÈù¢ÂØºËΩ® ==========
        createBeam({
            x: 72, y: 50, z: 0,
            w: 10, h: FRAME_H - 100, d: 10,
            color: 'lgray',
            holes: true, holeDir: 'vertical',
            holeCount: Math.floor((FRAME_H - 100) / 12),
            holeSpacing: 12
        });

        createBeam({
            x: FRAME_W - 82, y: 50, z: 0,
            w: 10, h: FRAME_H - 100, d: 10,
            color: 'lgray',
            holes: true, holeDir: 'vertical',
            holeCount: Math.floor((FRAME_H - 100) / 12),
            holeSpacing: 12
        });

        // ========== Âêé‰æßÁªìÊûÑ ==========
        createBeam({
            x: 75, y: 40, z: -98,
            w: 14, h: FRAME_H - 80, d: 14,
            color: 'dgray',
            holes: true, holeDir: 'vertical',
            holeCount: Math.floor((FRAME_H - 80) / 12),
            holeSpacing: 12
        });

        createBeam({
            x: FRAME_W - 89, y: 40, z: -98,
            w: 14, h: FRAME_H - 80, d: 14,
            color: 'dgray',
            holes: true, holeDir: 'vertical',
            holeCount: Math.floor((FRAME_H - 80) / 12),
            holeSpacing: 12
        });

        // ========== LÂûãËßí‰ª∂ ==========
        for (let floor = 1; floor <= 4; floor++) {
            const ly = 40 + (floor - 1) * FLOOR_H + 20;
            createLBracket({ x: 62, y: ly, z: 88, hLen: 28, vLen: 24 });
            createLBracket({ x: FRAME_W - 90, y: ly, z: 88, hLen: 28, vLen: 24 });
        }

        // ===================== ÁîµÊ¢ØÈÄªËæë =====================

        const views = {
            front: { x: 0, y: 0 },
            back: { x: 0, y: 180 },
            left: { x: 0, y: 90 },
            right: { x: 0, y: -90 },
            top: { x: -75, y: 0 },
            '3d': { x: -8, y: -25 }
        };

        const state = {
            floor: 1,
            target: 1,
            moving: false,
            pos: 0,
            vel: 0,
            doorsOpen: false,
            autoRotate: true,
            autoDemo: false,
            audio: false,
            rotX: -8,
            rotY: -25
        };

        const floors = { 1: 772, 2: 612, 3: 452, 4: 292 };
        state.pos = floors[1];

        const doorL = document.getElementById('doorLeft');
        const doorR = document.getElementById('doorRight');
        const cw = document.getElementById('counterweight');
        const gears = ['gear1', 'gear2', 'gear3'].map(id => document.getElementById(id));
        const statusFloor = document.getElementById('statusFloor');
        const statusText = document.getElementById('statusText');
        const rotateBtn = document.getElementById('rotateBtn');
        const autoBtn = document.getElementById('autoBtn');
        const audioBtn = document.getElementById('audioBtn');
        const audio = document.getElementById('audio');

        function updateIndicators() {
            for (let f = 1; f <= 4; f++) {
                const ind = document.getElementById(`indicator${f}`);
                if (ind) {
                    ind.classList.toggle('green', f === state.floor && state.doorsOpen);
                }
            }
        }

        function updatePos() {
            elevatorCar.style.bottom = (950 - state.pos - CAR_H) + 'px';

            // Èí¢ÁºÜÈïøÂ∫¶Ôºö‰ªéÈ°∂ÈÉ®(top=80)Âª∂‰º∏Âà∞ËΩøÂé¢È°∂ÈÉ®ÔºåËΩøÂé¢Ë∂ä‰ΩéÈí¢ÁºÜË∂äÈïø
            const cableH = state.pos - 80;
            cables.forEach(c => c.style.height = Math.max(0, cableH) + 'px');

            // ÈÖçÈáçÔºö‰∏éËΩøÂé¢ÂèçÂêëËøêÂä®ÔºåËΩøÂé¢Âú®1Â±Ç(pos=772)Êó∂ÈÖçÈáçÂú®È°∂ÈÉ®ÔºåËΩøÂé¢Âú®4Â±Ç(pos=292)Êó∂ÈÖçÈáçÂú®Â∫ïÈÉ®
            const cwBottom = 50 + (state.pos - 292) * 0.8;
            cw.style.bottom = Math.max(50, Math.min(550, cwBottom)) + 'px';

            // ÈÖçÈáçÁºÜÁª≥ÈïøÂ∫¶Ôºö‰ªéÈ°∂ÈÉ®(80px)Âà∞ÈÖçÈáçÈ°∂ÈÉ®
            // ÈÖçÈáçÈ´òÂ∫¶110pxÔºåÊâÄ‰ª•ÈÖçÈáçÈ°∂ÈÉ® = cwBottom + 110
            // ÁºÜÁª≥ÈïøÂ∫¶ = ÊÄªÊ°ÜÊû∂È´òÂ∫¶(950) - 80(È°∂ÈÉ®) - (cwBottom + 110)
            const cwTop = 950 - cwBottom - 110;  // ÈÖçÈáçÈ°∂ÈÉ®Ë∑ùÁ¶ªÈ°∂ÈÉ®ÁöÑË∑ùÁ¶ª
            const cwCableH = cwTop - 80;  // ‰ªétop:80ÂºÄÂßãÂà∞ÈÖçÈáçÈ°∂ÈÉ®
            cwCables.forEach(c => c.style.height = Math.max(0, cwCableH) + 'px');

            // ÂºπÁ∞ßÂéãÁº©ÔºöÂè™ÊúâÂΩìËΩøÂé¢Êé•Ëß¶ÂºπÁ∞ßÊó∂ÊâçÂéãÁº©
            // ÂºπÁ∞ßÈ°∂ÈÉ®‰ΩçÁΩÆ = 42(bottom) + 50(È´òÂ∫¶) = 92px
            // ËΩøÂé¢Â∫ïÈÉ®‰ΩçÁΩÆ = 950 - state.pos - CAR_H
            const carBottom = 950 - state.pos - CAR_H;
            const springTopWhenFull = 42 + SPRING_MAX_H;  // ÂºπÁ∞ßÂÆåÂÖ®‰º∏Â±ïÊó∂ÁöÑÈ°∂ÈÉ®‰ΩçÁΩÆ

            let springH = SPRING_MAX_H;  // ÈªòËÆ§ÂÆåÂÖ®‰º∏Â±ï
            if (carBottom < springTopWhenFull) {
                // ËΩøÂé¢Ê≠£Âú®ÂéãÂºπÁ∞ß
                const compression = springTopWhenFull - carBottom;
                springH = Math.max(SPRING_MIN_H, SPRING_MAX_H - compression);
            }
            springs.forEach(s => {
                s.style.height = springH + 'px';
            });
        }

        updatePos();

        function openDoors() {
            state.doorsOpen = true;
            doorL.classList.add('open');
            doorR.classList.add('open');
            updateIndicators();
        }

        function closeDoors() {
            state.doorsOpen = false;
            doorL.classList.remove('open');
            doorR.classList.remove('open');
            updateIndicators();
        }

        function startGears(dir) {
            gears[0].classList.add(dir > 0 ? 'spinning' : 'spinning-r');
            gears[1].classList.add(dir > 0 ? 'spinning-r' : 'spinning');
            gears[2].classList.add(dir > 0 ? 'spinning' : 'spinning-r');
        }

        function stopGears() {
            gears.forEach(g => g.classList.remove('spinning', 'spinning-r'));
        }

        const PHY = { maxV: 2.8, acc: 0.07, dec: 0.12, threshold: 2 };

        let animId = null;

        function animate() {
            const tgt = floors[state.target];
            const dist = tgt - state.pos;
            const absDist = Math.abs(dist);
            const dir = Math.sign(dist);
            const stopDist = (state.vel * state.vel) / (2 * PHY.dec);

            if (absDist <= PHY.threshold) {
                state.pos = tgt;
                state.vel = 0;
                state.moving = false;
                stopGears();
                updatePos();
                state.floor = state.target;
                statusFloor.textContent = state.floor;
                statusText.textContent = 'ARRIVED';
                setTimeout(() => {
                    openDoors();
                    statusText.textContent = 'IDLE';
                    if (state.autoDemo) setTimeout(autoNext, 2500);
                }, 300);
                return;
            }

            if (absDist <= stopDist) {
                state.vel -= PHY.dec * dir;
            } else if (Math.abs(state.vel) < PHY.maxV) {
                state.vel += PHY.acc * dir;
            }

            state.vel = Math.max(-PHY.maxV, Math.min(PHY.maxV, state.vel));
            state.pos += state.vel;
            updatePos();

            animId = requestAnimationFrame(animate);
        }

        function goTo(f) {
            if (state.moving || f === state.floor) {
                if (f === state.floor && !state.doorsOpen) openDoors();
                return;
            }

            closeDoors();
            updateFloorBtns(f);

            setTimeout(() => {
                state.target = f;
                state.moving = true;
                state.vel = 0;
                const dir = f > state.floor ? -1 : 1;
                statusText.textContent = dir < 0 ? '‚ñ≤ UP' : '‚ñº DOWN';
                startGears(dir);
                if (animId) cancelAnimationFrame(animId);
                animate();
            }, 1200);
        }

        function updateFloorBtns(f) {
            document.querySelectorAll('.floor-btn').forEach(b => {
                b.classList.toggle('active', parseInt(b.dataset.floor) === f);
            });
        }

        let autoSeq = [1, 2, 3, 4, 3, 2];
        let autoIdx = 0;

        function autoNext() {
            if (!state.autoDemo) return;
            autoIdx = (autoIdx + 1) % autoSeq.length;
            goTo(autoSeq[autoIdx]);
        }

        function setView(name) {
            const v = views[name];
            state.rotX = v.x;
            state.rotY = v.y;
            world.style.transform = `rotateX(${v.x}deg) rotateY(${v.y}deg)`;

            document.querySelectorAll('.view-btn').forEach(b => {
                b.classList.toggle('active', b.dataset.view === name);
            });

            if (state.autoRotate) {
                state.autoRotate = false;
                rotateBtn.classList.remove('on');
            }
        }

        let rotateAngle = -25;
        function autoRotateLoop() {
            if (state.autoRotate) {
                rotateAngle += 0.22;
                world.style.transform = `rotateX(-8deg) rotateY(${rotateAngle}deg)`;
            }
            requestAnimationFrame(autoRotateLoop);
        }
        autoRotateLoop();

        // ‰∫ã‰ª∂ÁªëÂÆö
        document.querySelectorAll('.view-btn').forEach(b => {
            b.addEventListener('click', () => setView(b.dataset.view));
        });

        document.querySelectorAll('.floor-btn').forEach(b => {
            b.addEventListener('click', () => goTo(parseInt(b.dataset.floor)));
        });

        document.addEventListener('keydown', e => {
            if (e.key >= '1' && e.key <= '4') goTo(parseInt(e.key));
        });

        rotateBtn.addEventListener('click', () => {
            state.autoRotate = !state.autoRotate;
            rotateBtn.classList.toggle('on', state.autoRotate);
            if (state.autoRotate) {
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            }
        });

        autoBtn.addEventListener('click', () => {
            state.autoDemo = !state.autoDemo;
            autoBtn.classList.toggle('on', state.autoDemo);
            autoBtn.textContent = state.autoDemo ? '‚è∏' : '‚ñ∂';
            if (state.autoDemo && !state.moving) autoNext();
        });

        audioBtn.addEventListener('click', () => {
            state.audio = !state.audio;
            audioBtn.classList.toggle('on', state.audio);
            if (state.audio) audio.play().catch(() => { });
            else audio.pause();
        });

        // ÊãñÊãΩÊóãËΩ¨
        let drag = false, px = 0, py = 0;

        document.addEventListener('mousedown', e => {
            if (e.target.closest('.control-panel')) return;
            drag = true;
            px = e.clientX;
            py = e.clientY;
            if (state.autoRotate) {
                state.autoRotate = false;
                rotateBtn.classList.remove('on');
                state.rotY = rotateAngle;
            }
        });

        document.addEventListener('mousemove', e => {
            if (!drag) return;
            state.rotY += (e.clientX - px) * 0.4;
            state.rotX -= (e.clientY - py) * 0.3;
            state.rotX = Math.max(-85, Math.min(25, state.rotX));
            world.style.transform = `rotateX(${state.rotX}deg) rotateY(${state.rotY}deg)`;
            px = e.clientX;
            py = e.clientY;
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
        });

        document.addEventListener('mouseup', () => drag = false);

        // Ëß¶Êë∏ÊîØÊåÅ
        document.addEventListener('touchstart', e => {
            if (e.target.closest('.control-panel')) return;
            drag = true;
            px = e.touches[0].clientX;
            py = e.touches[0].clientY;
            if (state.autoRotate) {
                state.autoRotate = false;
                rotateBtn.classList.remove('on');
                state.rotY = rotateAngle;
            }
        });

        document.addEventListener('touchmove', e => {
            if (!drag) return;
            state.rotY += (e.touches[0].clientX - px) * 0.4;
            state.rotX -= (e.touches[0].clientY - py) * 0.3;
            state.rotX = Math.max(-85, Math.min(25, state.rotX));
            world.style.transform = `rotateX(${state.rotX}deg) rotateY(${state.rotY}deg)`;
            px = e.touches[0].clientX;
            py = e.touches[0].clientY;
        });

        document.addEventListener('touchend', () => drag = false);

        // ÂàùÂßãÂºÄÈó®
        setTimeout(openDoors, 500);
    </script>
</body>

</html>